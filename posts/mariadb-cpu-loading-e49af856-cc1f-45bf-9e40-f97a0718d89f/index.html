<!doctype html><html><head><title>è¨˜ä¸€æ¬¡ MariaDB CPU Loading æ»¿è¼‰æŸ¥ä¿®éç¨‹</title><meta charset=utf-8><meta name=X-UA-Compatible content="IE=edge"><meta name=google-site-verification content><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name=viewport><meta content="telephone=no" name=format-detection><meta name=description content><meta name=renderer content="webkit"><meta name=theme-color content="#ffffff"><meta property="og:title" content="è¨˜ä¸€æ¬¡ MariaDB CPU Loading æ»¿è¼‰æŸ¥ä¿®éç¨‹"><meta property="og:description" content="èµ·å›  å®¢æˆ¶ç’°å¢ƒçš„ MariaDB æŠŠ CPU Resource éƒ½åƒæ»¿äº†ï¼Œ
ç”¨ SHOW PROCESSLIST æŸ¥è©¢æœ‰çœ‹åˆ°å¥½å¹¾æ¢æ…¢çš„æŸ¥è©¢ï¼Œäº‚æ§æ‰“é³¥èª¿æ•´äº†å‰å¹¾ç­†éƒ½ä¸è¦‹æ”¹å–„ã€‚
ç‚ºäº†è¦å¯ä»¥æ¯”è¼ƒç²¾æº–åœ°æ”¹å–„å•é¡Œï¼Œåšäº†ä¸€äº›ç ” (goo) ç©¶ (gle)ã€‚
ç—‡ç‹€ ç”¨ TOP åªçœ‹å¾—åˆ° CPU åƒæ»¿ï¼Œä½†æ˜¯è¨˜æ†¶é«”çš„ç‹€æ³æ˜¯ OK çš„ ATOP çœ‹èµ·ä¾†ç¡¬ç¢Ÿä¹Ÿä¸å¿™ï¼Œç”±æ–¼æœå‹™è·Ÿ DB å»ºåœ¨åŒä¸€å°ï¼Œæ‡‰è©²ä¹Ÿä¸æ˜¯ç¶²è·¯å•é¡Œ ç´„å¥½åœæœå‹™ä¹‹å¾Œï¼Œä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€å…ˆ OPTIMIZE TABLE ä¹Ÿæ²’æœ‰ç”¨ å¡ä½çš„å‰å¹¾åéƒ½æ˜¯ UPDATEï¼Œä¸€åº¦æ‡·ç–‘æ˜¯å¯«å…¥çš„å•é¡Œï¼Œä½†æ˜¯å¯¦éš›æ‰¾ä¸€å€‹æ¸¬è©¦è³‡æ–™ Insert / Update éƒ½å¾ˆå¿«ï¼ŒæŠŠé€™å€‹ UPDATE ç›¸é—œçš„ Code æ‹”æ‰ä¹Ÿæ²’æœ‰ç”¨ã€‚ ä¿®å¾©æµç¨‹ å€¼å¾—åƒè€ƒçš„æµç¨‹ A Simple Approach to Troubleshooting High CPU in MySQL - Percona Database Performance Blog
åƒè€ƒäº† Percona çµ¦å‡ºçš„æµç¨‹ï¼Œå¯«å¾—æŒºä¸éŒ¯çš„ ğŸ‘
é›–ç„¶æˆ‘çš„Â DB ç‰ˆæœ¬å¤ªèˆŠäº†æ²’æœ‰ç”¨ (å¿…é ˆè¦ MariaDB 10.5 ä»¥ä¸Šæ‰æœ‰ THREAD_OS_ID )ã€‚"><meta property="og:type" content="article"><meta property="og:url" content="https://krapshsa.github.io/posts/mariadb-cpu-loading-e49af856-cc1f-45bf-9e40-f97a0718d89f/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-04T18:46:00+08:00"><meta property="article:modified_time" content="2022-08-04T18:46:00+08:00"><meta property="og:site_name" content="My Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="è¨˜ä¸€æ¬¡ MariaDB CPU Loading æ»¿è¼‰æŸ¥ä¿®éç¨‹"><meta name=twitter:description content="èµ·å›  å®¢æˆ¶ç’°å¢ƒçš„ MariaDB æŠŠ CPU Resource éƒ½åƒæ»¿äº†ï¼Œ
ç”¨ SHOW PROCESSLIST æŸ¥è©¢æœ‰çœ‹åˆ°å¥½å¹¾æ¢æ…¢çš„æŸ¥è©¢ï¼Œäº‚æ§æ‰“é³¥èª¿æ•´äº†å‰å¹¾ç­†éƒ½ä¸è¦‹æ”¹å–„ã€‚
ç‚ºäº†è¦å¯ä»¥æ¯”è¼ƒç²¾æº–åœ°æ”¹å–„å•é¡Œï¼Œåšäº†ä¸€äº›ç ” (goo) ç©¶ (gle)ã€‚
ç—‡ç‹€ ç”¨ TOP åªçœ‹å¾—åˆ° CPU åƒæ»¿ï¼Œä½†æ˜¯è¨˜æ†¶é«”çš„ç‹€æ³æ˜¯ OK çš„ ATOP çœ‹èµ·ä¾†ç¡¬ç¢Ÿä¹Ÿä¸å¿™ï¼Œç”±æ–¼æœå‹™è·Ÿ DB å»ºåœ¨åŒä¸€å°ï¼Œæ‡‰è©²ä¹Ÿä¸æ˜¯ç¶²è·¯å•é¡Œ ç´„å¥½åœæœå‹™ä¹‹å¾Œï¼Œä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€å…ˆ OPTIMIZE TABLE ä¹Ÿæ²’æœ‰ç”¨ å¡ä½çš„å‰å¹¾åéƒ½æ˜¯ UPDATEï¼Œä¸€åº¦æ‡·ç–‘æ˜¯å¯«å…¥çš„å•é¡Œï¼Œä½†æ˜¯å¯¦éš›æ‰¾ä¸€å€‹æ¸¬è©¦è³‡æ–™ Insert / Update éƒ½å¾ˆå¿«ï¼ŒæŠŠé€™å€‹ UPDATE ç›¸é—œçš„ Code æ‹”æ‰ä¹Ÿæ²’æœ‰ç”¨ã€‚ ä¿®å¾©æµç¨‹ å€¼å¾—åƒè€ƒçš„æµç¨‹ A Simple Approach to Troubleshooting High CPU in MySQL - Percona Database Performance Blog
åƒè€ƒäº† Percona çµ¦å‡ºçš„æµç¨‹ï¼Œå¯«å¾—æŒºä¸éŒ¯çš„ ğŸ‘
é›–ç„¶æˆ‘çš„Â DB ç‰ˆæœ¬å¤ªèˆŠäº†æ²’æœ‰ç”¨ (å¿…é ˆè¦ MariaDB 10.5 ä»¥ä¸Šæ‰æœ‰ THREAD_OS_ID )ã€‚"><link type=text/css rel=stylesheet href=/vendor/css/bootstrap.min.css><link rel=stylesheet href=/scss/journal.min.c5d92f380bf10f6849c7ac487c7df2b22c081e0851e5339224f1ae29210b20d2.css integrity="sha256-xdkvOAvxD2hJx6xIfH3ysiwIHghR5TOSJPGuKSELINI=" media=screen><link rel=stylesheet href=/scss/dark-mode.min.9f8d8c2df9285089d141edd4a50cb7506c7948e6ab79a29968dced1bd0ab7d22.css integrity="sha256-n42MLfkoUInRQe3UpQy3UGx5SOareaKZaNztG9CrfSI=" media=screen><script src=/vendor/js/loadCSS.js></script>
<script>loadCSS("https://fonts.googleapis.com/css?family=Fira+Mono|Material+Icons")</script><script src=/js/toc.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css><script src=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js></script>
<script src=/vendor/js/md5.min.js></script>
<script>var gitalk=new Gitalk({clientID:"your client id",clientSecret:"your client secret",repo:"repo name",owner:"user",admin:["user"],id:md5(location.pathname),distractionFreeMode:"false"});window.onload=function(){gitalk.render("gitalk-container")}</script></head><body><div id=app><div id=sideContainer class=side-container><a class="a-block nav-head false" href=https://krapshsa.github.io/><div class=nav-title>KRAPSHSA'S BLOG</div><div class=nav-subtitle>Themed by Diary.</div></a><div class=nav-link-list><a class="a-block nav-link-item active" href=/posts>Archive</a>
<a class="a-block nav-link-item false" href=/categories>Categories</a>
<a class="a-block nav-link-item false" href=/tags>Tags</a>
<a class="a-block nav-link-item false" href=/index.xml>RSS Feed</a></div><div class=nav-footer>Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> by <a href=https://risehere.net/>Rise</a><br>Ported from <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br>&copy;
Â© 2007 - 2022 krapshsa</div></div><div id=extraContainer class=extra-container><div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }"><div class=toc-content><center>- CATALOG -</center><ul><ul><li><a href=#%e8%b5%b7%e5%9b%a0 onclick="onNavClick(`#èµ·å› -nav`)" id=èµ·å› -nav>èµ·å› </a></li><li><a href=#%e7%97%87%e7%8b%80 onclick="onNavClick(`#ç—‡ç‹€-nav`)" id=ç—‡ç‹€-nav>ç—‡ç‹€</a></li><li><a href=#%e4%bf%ae%e5%be%a9%e6%b5%81%e7%a8%8b onclick="onNavClick(`#ä¿®å¾©æµç¨‹-nav`)" id=ä¿®å¾©æµç¨‹-nav>ä¿®å¾©æµç¨‹</a></li><ul><li><a href=#%e5%80%bc%e5%be%97%e5%8f%83%e8%80%83%e7%9a%84%e6%b5%81%e7%a8%8b onclick="onNavClick(`#å€¼å¾—åƒè€ƒçš„æµç¨‹-nav`)" id=å€¼å¾—åƒè€ƒçš„æµç¨‹-nav>å€¼å¾—åƒè€ƒçš„æµç¨‹</a></li><li><a href=#%e6%88%91%e7%9a%84%e6%b5%81%e7%a8%8b onclick="onNavClick(`#æˆ‘çš„æµç¨‹-nav`)" id=æˆ‘çš„æµç¨‹-nav>æˆ‘çš„æµç¨‹</a></li></ul><li><a href=#%e4%ba%8b%e5%be%8c%e8%ab%b8%e8%91%9b onclick="onNavClick(`#äº‹å¾Œè«¸è‘›-nav`)" id=äº‹å¾Œè«¸è‘›-nav>äº‹å¾Œè«¸è‘›</a></li><li><a href=#%e5%8f%83%e8%80%83%e8%b3%87%e6%96%99 onclick="onNavClick(`#åƒè€ƒè³‡æ–™-nav`)" id=åƒè€ƒè³‡æ–™-nav>åƒè€ƒè³‡æ–™</a></li></ul></div></div><div class=pagination><a id=globalBackToTop class="pagination-action animated-visibility" href=#top :class="{ invisible: scrollY == 0 }"><i class="material-icons pagination-action-icon">keyboard_arrow_up</i></a>
<a type=button class=pagination-action id=darkModeToggleButton><span class="material-icons pagination-action-icon" id=darkModeToggleIcon>dark_mode</span></a></div></div><div class=single-column-drawer-container id=drawer v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }"><div class=drawer-content><div class=drawer-menu><a class="a-block drawer-menu-item active" href=/posts>Archive</a>
<a class="a-block drawer-menu-item false" href=/categories>Categories</a>
<a class="a-block drawer-menu-item false" href=/tags>Tags</a>
<a class="a-block drawer-menu-item false" href=/index.xml>RSS Feed</a><div class=toc><div class=toc-content><center>- CATALOG -</center><ul><ul><li><a href=#%e8%b5%b7%e5%9b%a0 onclick="onNavClick(`#èµ·å› -nav`)" id=èµ·å› -nav>èµ·å› </a></li><li><a href=#%e7%97%87%e7%8b%80 onclick="onNavClick(`#ç—‡ç‹€-nav`)" id=ç—‡ç‹€-nav>ç—‡ç‹€</a></li><li><a href=#%e4%bf%ae%e5%be%a9%e6%b5%81%e7%a8%8b onclick="onNavClick(`#ä¿®å¾©æµç¨‹-nav`)" id=ä¿®å¾©æµç¨‹-nav>ä¿®å¾©æµç¨‹</a></li><ul><li><a href=#%e5%80%bc%e5%be%97%e5%8f%83%e8%80%83%e7%9a%84%e6%b5%81%e7%a8%8b onclick="onNavClick(`#å€¼å¾—åƒè€ƒçš„æµç¨‹-nav`)" id=å€¼å¾—åƒè€ƒçš„æµç¨‹-nav>å€¼å¾—åƒè€ƒçš„æµç¨‹</a></li><li><a href=#%e6%88%91%e7%9a%84%e6%b5%81%e7%a8%8b onclick="onNavClick(`#æˆ‘çš„æµç¨‹-nav`)" id=æˆ‘çš„æµç¨‹-nav>æˆ‘çš„æµç¨‹</a></li></ul><li><a href=#%e4%ba%8b%e5%be%8c%e8%ab%b8%e8%91%9b onclick="onNavClick(`#äº‹å¾Œè«¸è‘›-nav`)" id=äº‹å¾Œè«¸è‘›-nav>äº‹å¾Œè«¸è‘›</a></li><li><a href=#%e5%8f%83%e8%80%83%e8%b3%87%e6%96%99 onclick="onNavClick(`#åƒè€ƒè³‡æ–™-nav`)" id=åƒè€ƒè³‡æ–™-nav>åƒè€ƒè³‡æ–™</a></li></ul></div></div></div></div></div><transition name=fade><div id=drawer-mask v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if=isDrawerOpen v-on:click=toggleDrawer></div></transition><nav id=navBar class="navbar sticky-top navbar-light single-column-nav-container"><div id=navBackground class=nav-background></div><div class="container container-narrow nav-content"><button id=nav_dropdown_btn class=nav-dropdown-toggle type=button v-on:click=toggleDrawer>
<i class=material-icons>menu</i></button>
<a id=navTitle class=navbar-brand href=https://krapshsa.github.io/>KRAPSHSA'S BLOG</a>
<button type=button class=nav-darkmode-toggle id=darkModeToggleButton2>
<i class=material-icons id=darkModeToggleIcon2>dark_mode</i></button></div></nav><div class=single-column-header-container id=pageHead v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }"><a href=https://krapshsa.github.io/><div class=single-column-header-title>KRAPSHSA'S BLOG</div><div class=single-column-header-subtitle>Themed by Diary.</div></a></div><div id=content><div id=streamContainer class=stream-container><div class="post-list-container post-list-container-shadow"><div class=post><div class=post-head-wrapper-text-only><div class=post-title>è¨˜ä¸€æ¬¡ MariaDB CPU Loading æ»¿è¼‰æŸ¥ä¿®éç¨‹<div class=post-meta><time itemprop=datePublished>2022-08-04 18:46</time></div></div></div><div class=post-body-wrapper><div class=post-body v-pre><h2 id=èµ·å› >èµ·å› </h2><p>å®¢æˆ¶ç’°å¢ƒçš„ MariaDB æŠŠ CPU Resource éƒ½åƒæ»¿äº†ï¼Œ</p><p>ç”¨ <code>SHOW PROCESSLIST</code> æŸ¥è©¢æœ‰çœ‹åˆ°å¥½å¹¾æ¢æ…¢çš„æŸ¥è©¢ï¼Œäº‚æ§æ‰“é³¥èª¿æ•´äº†å‰å¹¾ç­†éƒ½ä¸è¦‹æ”¹å–„ã€‚</p><p>ç‚ºäº†è¦å¯ä»¥æ¯”è¼ƒç²¾æº–åœ°æ”¹å–„å•é¡Œï¼Œåšäº†ä¸€äº›ç ” (goo) ç©¶ (gle)ã€‚</p><br><h2 id=ç—‡ç‹€>ç—‡ç‹€</h2><ol><li>ç”¨ TOP åªçœ‹å¾—åˆ° CPU åƒæ»¿ï¼Œä½†æ˜¯è¨˜æ†¶é«”çš„ç‹€æ³æ˜¯ OK çš„
<img src=Screen_Shot_2022-08-04_at_6-933c0ea7-374b-425e-a8c0-48a7b22d5b20.52.53_PM.png alt></li><li>ATOP çœ‹èµ·ä¾†ç¡¬ç¢Ÿä¹Ÿä¸å¿™ï¼Œç”±æ–¼æœå‹™è·Ÿ DB å»ºåœ¨åŒä¸€å°ï¼Œæ‡‰è©²ä¹Ÿä¸æ˜¯ç¶²è·¯å•é¡Œ
<img src=Screen_Shot_2022-08-04_at_6-4c435945-644d-404e-81b1-f95682c8e20e.54.25_PM.png alt></li><li>ç´„å¥½åœæœå‹™ä¹‹å¾Œï¼Œä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€å…ˆ <code>OPTIMIZE TABLE</code> ä¹Ÿæ²’æœ‰ç”¨</li><li>å¡ä½çš„å‰å¹¾åéƒ½æ˜¯ UPDATEï¼Œä¸€åº¦æ‡·ç–‘æ˜¯å¯«å…¥çš„å•é¡Œï¼Œä½†æ˜¯å¯¦éš›æ‰¾ä¸€å€‹æ¸¬è©¦è³‡æ–™ Insert / Update éƒ½å¾ˆå¿«ï¼ŒæŠŠé€™å€‹ UPDATE ç›¸é—œçš„ Code æ‹”æ‰ä¹Ÿæ²’æœ‰ç”¨ã€‚</li></ol><br><h2 id=ä¿®å¾©æµç¨‹>ä¿®å¾©æµç¨‹</h2><h3 id=å€¼å¾—åƒè€ƒçš„æµç¨‹>å€¼å¾—åƒè€ƒçš„æµç¨‹</h3><p><a href=https://www.percona.com/blog/2020/04/23/a-simple-approach-to-troubleshooting-high-cpu-in-mysql/>A Simple Approach to Troubleshooting High CPU in MySQL - Percona Database Performance Blog</a></p><p>åƒè€ƒäº† Percona çµ¦å‡ºçš„æµç¨‹ï¼Œå¯«å¾—æŒºä¸éŒ¯çš„ ğŸ‘</p><p>é›–ç„¶æˆ‘çš„Â DB ç‰ˆæœ¬å¤ªèˆŠäº†æ²’æœ‰ç”¨ (å¿…é ˆè¦ MariaDB 10.5 ä»¥ä¸Šæ‰æœ‰ <code>THREAD_OS_ID</code> )ã€‚</p><p>ä¸éé‚„æ˜¯è¬›ä¸€ä¸‹ï¼Œæ€è·¯æ˜¯ï¼š</p><ol><li>å–®å¾ pid åªæœƒçœ‹åˆ° process å¾ˆå¿™ï¼Œçœ‹ä¸å‡ºæ˜¯å“ªå€‹ command å¾ˆå¿™ï¼Œå› ç‚ºæ˜¯ multi-threadã€‚</li><li>æƒ³è¾¦æ³•æ‰¾åˆ° thread id ï¼Œçœ‹çœ‹æ˜¯å“ªå€‹ thread åœ¨å¿™ã€‚</li><li>æœ‰ thread id ä¹‹å¾Œå°±å¯ä»¥ç”¨ï¼Œ <code>performance_schema.threads</code> æ‰¾åˆ° <code>THREAD_OS_ID</code> å°æ‡‰çš„ Commandã€‚</li></ol><br><h3 id=æˆ‘çš„æµç¨‹>æˆ‘çš„æµç¨‹</h3><p>å› ç‚ºæˆ‘çš„ MariaDB é‚„æ²’æœ‰å‡ç´šåˆ° 10.5ï¼Œæ‰€ä»¥æˆ‘æ˜¯å»çœ‹ process list ä¸­æ¯”è¼ƒæ…¢çš„ queryã€‚</p><p>å°é€™äº› Query æŸ¥çœ‹ query planï¼Œæœ€å¾Œæ‰¾åˆ°ä¸€ç­† <code>SELECT</code> ï¼Œåœ¨æŠŠæœå‹™åˆ‡æ–·çš„ç‹€æ…‹ä¸‹å°±è¦å››ç§’ã€‚</p><pre tabindex=0><code>describe SELECT * FROM problem_table WHERE id=100 AND `path` LIKE &#39;æŸå€‹é—œéµå­—%&#39;;
+------+-------------+---------------+------+-------------------------------------------------------+-----------------+---------+-------+---------+-------------+
| id   | select_type | table         | type | possible_keys                                         | key             | key_len | ref   | rows    | Extra       |
+------+-------------+---------------+------+-------------------------------------------------------+-----------------+---------+-------+---------+-------------+
|    1 | SIMPLE      | problem_table | ref  | index_1,index_2,index_3                               | index_3         | 4       | const | 4213770 | Using where |
+------+-------------+---------------+------+-------------------------------------------------------+-----------------+---------+-------+---------+-------------+
</code></pre><p>çœ‹åˆ° <code>index_3</code> (è¢«æˆ‘ç¢¼æ‰äº†) æ˜¯ <code>fid</code>+ <code>extra</code> çš„è¯åˆç´¢å¼•ï¼Œå° <code>path</code> æ²’æœ‰å¹«åŠ©</p><p>è¦ºå¾—æ‡‰è©²æ˜¯æ²’æœ‰é©åˆçš„ Indexï¼Œæ‰æœƒé€™éº¼ä¹…ã€‚</p><p>é‡å° <code>fid</code> + <code>path</code> å»å»º Indexï¼Œæœ€å¾Œå°±è§£æ±ºå•é¡Œäº†ï¼š</p><pre tabindex=0><code>create index index_4 on problem_table(field_1,field_2(768));
Query OK, 0 rows affected (1 min 29.487 sec)

describe SELECT * FROM problem_table WHERE fid=100 AND `path` LIKE &#39;æŸå€‹é—œéµå­—%&#39;;
+------+-------------+---------------+-------+-------------------------------------------------------+-----------------+---------+-------+---------+------------------------------------+
| id   | select_type | table         | type  | possible_keys                                         | key             | key_len | ref   | rows    | Extra                              |
+------+-------------+---------------+-------+-------------------------------------------------------+-----------------+---------+-------+---------+------------------------------------+
|    1 | SIMPLE      | problem_table | range | index_1,index_2,index_3,index_4                       | index_4         | 2311    | NULL  | 1       | Using index condition; Using where |
+------+-------------+---------------+-------+-------------------------------------------------------+-----------------+---------+-------+---------+------------------------------------+

 
MariaDB [owncloud]&gt; ELECT * FROM problem_table WHERE fid=100 AND `path` LIKE &#39;æŸå€‹é—œéµå­—%&#39;;
Empty set (0.000 sec)
</code></pre><p>SLA æœªé”æ‰¿è«¾æ˜¯è¦è¢«ç½°çš„ï¼Œç•¶æ™‚é€™å€‹æ–¹æ³•æœ‰ç”¨å°±å…ˆé ‚è‘—ç”¨äº†ã€‚</p><br><h2 id=äº‹å¾Œè«¸è‘›>äº‹å¾Œè«¸è‘›</h2><p>åœ¨ç¾å ´æ™‚æ†‘è‘—ä¸€è‚¡ç›´è¦ºï¼Œè¦ºå¾—ç”¨åˆ° <code>fid</code> + <code>path</code> å°±å»å»ºæ§‹é€™å…©å€‹çš„è¯åˆç´¢å¼•ï¼Œ</p><p>é‚£åˆ°åº•é€™æ¨£å»º index ç‚ºä»€éº¼æœ‰ç”¨ï¼Œè¦ä¾†äº‹å¾Œè«¸è‘›ä¸€ä¸‹ï¼š</p><ol><li><code>fid</code> æ˜¯å¤–ä¾†éµï¼Œ <code>fid</code> ç‚º 100 çš„é€™å€‹ caseï¼Œåœ¨ DB ä¸­æœ‰ 400 å¤šè¬ç­†ï¼Œä½”å…¨éƒ¨çš„ä¸€åŠ â†’ åŸºæ•¸å¾ˆå° â†’ å–®ç¨æ‹¿ä¾†å»ºç´¢å¼•å¯èƒ½æ²’å•¥ç”¨</li><li><code>path</code> æ˜¯æ‹¿ä¾†æœç´¢è·¯å¾‘çš„ï¼Œé€šå¸¸éƒ½æ˜¯æ‰¾è©²è·¯å¾‘ä¹‹ä¸‹çš„å…¨éƒ¨ â†’ ç”¨äº† <code>LIKE</code>ï¼Œä½†æ˜¯ <code>%</code> åœ¨å³é‚Š â†’ Prefix match æ˜¯å¯ä»¥ç”¨åˆ°ç´¢å¼•çš„</li><li><code>path</code> çš„åŸºæ•¸å¾ˆå¤§ â†’ å»º index æ•ˆæœä¸éŒ¯</li><li><code>key_len</code> é¡¯ç¤ºä¸æ˜¯åªæœ‰ç”¨åˆ°è¯åˆç´¢å¼•ä¸­çš„ç¬¬ä¸€å€‹ (<code>fid</code>)</li><li><code>rows</code> æ˜¯ <code>1</code> è¡¨ç¤ºåªéœ€è¦æƒä¸€è¡Œå°±å¯ä»¥äº† (è¶Šå°è¶Šå¥½)</li><li><code>Extra</code> æœ‰ <code>Using index</code> è¡¨ç¤ºåœ¨ç´¢å¼•æ¨¹ä¸­å°±å¯ä»¥æ‰¾åˆ°è³‡è¨Šï¼Œè¡¨ç¤ºé‚„ä¸éŒ¯</li></ol><p>æœ‰æ©Ÿæœƒå¯ä»¥å†åšå¹¾å€‹å˜—è©¦ï¼š</p><ol><li>åªå»º <code>path</code> å¯ä¸å¯ä»¥ â†’ åŸºæ•¸ç®—å¤§ï¼Œæ‰€ä»¥æƒ³å˜—è©¦</li><li>åéä¾†å»ºæˆ <code>path</code> + <code>fid</code> æœƒä¸æœƒæ›´å¥½ â†’ åŸºæ•¸å¤§çš„æ”¾å‰é¢ï¼Œæƒ³è©¦è©¦çœ‹</li></ol><br><h2 id=åƒè€ƒè³‡æ–™>åƒè€ƒè³‡æ–™</h2><p><a href=https://www.percona.com/blog/2020/04/23/a-simple-approach-to-troubleshooting-high-cpu-in-mysql/>A Simple Approach to Troubleshooting High CPU in MySQL - Percona Database Performance Blog</a></p><p><a href=https://ithelp.ithome.com.tw/articles/10221971></a></p><p><a href=https://segmentfault.com/a/1190000008131735>MySQL æ€§èƒ½ä¼˜åŒ–ç¥å™¨ Explain ä½¿ç”¨åˆ†æ</a></p><p><a href=https://www.jianshu.com/p/57a42f6a8746></a></p><p><a href=https://opensource.actionsky.com/20210407-mysql/>ç¬¬25æœŸï¼šç´¢å¼•è®¾è®¡ï¼ˆç´¢å¼•çš„åŸºæ•°ä¸å¯é€‰æ‹©æ€§ï¼‰ - çˆ±å¯ç”Ÿå¼€æºç¤¾åŒº</a></p><hr width=100% id=EOF><p style=color:#777>Last modified on 2022-08-04</p></div></div><nav class=post-pagination><a class=newer-posts>Next<br>No newer posts.</a>
<a class=older-posts href=/posts/windows-unix-cygwin-mingw-msys-05707f1a-cacd-4484-9457-7aa26c7cace8/>Previous<br>Windows ä¸Šçš„é¡ Unix ç’°å¢ƒ - Cygwinã€MinGWã€MSYS</a></nav><div class=post-comment-wrapper><div id=gitalk-container></div></div></div></div></div></div><div id=single-column-footer>Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> by <a href=https://risehere.net/>Rise</a><br>Ported from <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br>&copy;
Â© 2007 - 2022 krapshsa</div></div><script src=/js/journal.js></script></body></html>