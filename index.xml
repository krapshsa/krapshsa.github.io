<?xml-stylesheet href="/rss.xsl" type="text/xsl"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>KRAPSHSA'S BLOG</title><link>https://krapshsa.github.io/</link><description>Recent content on KRAPSHSA'S BLOG</description><generator>Hugo -- gohugo.io</generator><language>zh-tw</language><copyright>Â© 2007 - 2022 krapshsa</copyright><lastBuildDate>Tue, 23 Aug 2022 16:25:00 +0000</lastBuildDate><atom:link href="https://krapshsa.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title>Grind 75 Week 2 å›é¡§</title><link>https://krapshsa.github.io/posts/grind-75-week-2/</link><pubDate>Tue, 23 Aug 2022 16:25:00 +0000</pubDate><guid>https://krapshsa.github.io/posts/grind-75-week-2/</guid><description>KRAPSHSA'S BLOG https://krapshsa.github.io/posts/grind-75-week-2/ -&lt;h1 id="grind-75-week-2-å›é¡§">Grind 75 Week 2 å›é¡§&lt;/h1>
&lt;hr>
&lt;h2 id="å°å¿ƒå¾—">å°å¿ƒå¾—&lt;/h2>
&lt;p>æœ‰ä¸€äº›é¡Œç›®ç¬¬ä¸€æ¬¡å¯«ï¼Œå¯«ä¸å‡ºä¾†äº†ã€‚ä¾‹å¦‚ &lt;a href="https://leetcode.com/problems/climbing-stairs">Climbing Stairs&lt;/a>&lt;/p>
&lt;h2 id="implement-queue-using-stackshttpsleetcodecomproblemsimplement-queue-using-stacks">&lt;a href="https://leetcode.com/problems/implement-queue-using-stacks">Implement Queue using Stacks&lt;/a>&lt;/h2>
&lt;ul>
&lt;li>Stack: FILO&lt;/li>
&lt;li>Queue: FIFO&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>éœ€è¦å€’è½‰ Stack çš„å…§å®¹
&lt;ol>
&lt;li>æŠŠ Stack pop çš„å…§å®¹ push åˆ°å¦å¤–ä¸€å€‹ Stack å°±å®Œæˆäº†å€’è½‰ â†’ æ‰€ä»¥éœ€è¦å…©å€‹ Stack&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>è¦ä¿è­‰é †åºæ€§ï¼Œæ‰€ä»¥å€’è½‰çš„éç¨‹åªèƒ½ç™¼ç”Ÿåœ¨ç”¨ä¾†æ”¾å€’è½‰å…ƒç´ çš„ Stack ç‚ºç©ºçš„æ™‚å€™&lt;/li>
&lt;/ol>
&lt;h2 id="first-bad-versionhttpsleetcodecomproblemsfirst-bad-version">&lt;a href="https://leetcode.com/problems/first-bad-version">First Bad Version&lt;/a>&lt;/h2>
&lt;p>åˆæ˜¯ Binary Searchï¼Œè¦å°å¿ƒé‚Šç•Œå•é¡Œä»¥åŠé‡è¤‡å•é¡Œ&lt;/p>
&lt;p>å¯ä»¥å»çœ‹ Week 1 çš„ Binary Searchï¼Œ Carl çš„å½±ç‰‡å¾ˆæ¸…æ¥š&lt;/p>
&lt;p>å€‹äººèªç‚ºå·¦é–‰å³é–‹å€é–“å¾ˆé›£æ‡‚ï¼Œé‚„æ˜¯ä½¿ç”¨å·¦é–‰å³é–‰ï¼Œå³ &lt;code>left&lt;/code> &lt;code>right&lt;/code> éƒ½æ˜¯æœç´¢ç¯„åœ&lt;/p>
&lt;h2 id="ransom-notehttpsleetcodecomproblemsransom-note">&lt;a href="https://leetcode.com/problems/ransom-note">Ransom Note&lt;/a>&lt;/h2>
&lt;p>map è§£&lt;/p>
&lt;h2 id="climbing-stairshttpsleetcodecomproblemsclimbing-stairs">&lt;a href="https://leetcode.com/problems/climbing-stairs">Climbing Stairs&lt;/a>&lt;/h2>
&lt;p>ç¬¬ n éšçš„ä¸Šæ¨“æ–¹æ³•æ˜¯ï¼š&lt;/p>
&lt;ul>
&lt;li>ç¬¬ (n-1) éš + 1 â†’ ä¸Šåˆ°ç¬¬ (n-1) éšçš„æ–¹æ³•æ•¸&lt;/li>
&lt;li>ç¬¬ (n-2) éš + 2 â†’ ä¸Šé“ç¬¬ (n-2) éšçš„æ–¹æ³•æ•¸&lt;/li>
&lt;li>ç¬¬ (n-2) éš + 1 + 1 â†’ å·²ç¶“è¢«ç®—éäº†ä¸é‡è¤‡ç®—&lt;/li>
&lt;/ul>
&lt;h2 id="longest-palindromehttpsleetcodecomproblemslongest-palindrome">&lt;a href="https://leetcode.com/problems/longest-palindrome">Longest Palindrome&lt;/a>&lt;/h2>
&lt;p>map ç´€éŒ„æœ‰å¤šå°‘æˆå°çš„å­—å…ƒ&lt;/p>
&lt;p>å›æ–‡ä¸­é–“å¯ä»¥æ˜¯å–®ç¨çš„å­—å…ƒï¼Œåªè¦åˆ¤æ–·ä¸€ä¸‹æœ€å¾Œæˆå°çš„åŠ èµ·ä¾†å€‹æ•¸æœ‰æ²’æœ‰è·ŸåŸå§‹å­—ä¸²ä¸€æ¨£é•·ï¼Œ&lt;/p>
&lt;ul>
&lt;li>æ˜¯ â†’ è§£&lt;/li>
&lt;li>å¦ â†’ å¯ä»¥åŠ ä¸€&lt;/li>
&lt;/ul>
&lt;h2 id="reverse-linked-listhttpsleetcodecomproblemsreverse-linked-list">&lt;a href="https://leetcode.com/problems/reverse-linked-list">Reverse Linked List&lt;/a>&lt;/h2>
&lt;p>è¦è¨˜å¾—ä¸‹ä¸€å€‹è·Ÿå‰ä¸€å€‹ï¼Œæ¯”å…©å…©äº¤æ›ç¨å¾®è¤‡é›œä¸€é»&lt;/p>
&lt;h2 id="majority-elementhttpsleetcodecomproblemsmajority-element">&lt;a href="https://leetcode.com/problems/majority-element">Majority Element&lt;/a>&lt;/h2>
&lt;p>solution å¾ˆå€¼å¾—ä¸€çœ‹ï¼Œæœ‰å¾ˆå¤šç¨®æƒ³æ³•ä»‹ç´¹è€Œä¸”éƒ½å¾ˆè©³ç´°&lt;/p>
&lt;p>&lt;a href="https://leetcode.com/problems/majority-element/solution/">Majority Element - LeetCode&lt;/a>&lt;/p>
&lt;p>Boyer-Moore Voting Algorithm&lt;/p>
&lt;p>å­˜åœ¨çµ•å°å¤šæ•¸çš„æƒ…æ³ä¸‹ï¼Œå€†å€†ä¸åŒçš„å…ƒç´ æ¹®æ»…ï¼Œæœ€å¾Œå‰©ä¸‹çš„å°±æ˜¯çœ¾æ•¸&lt;/p>
&lt;h2 id="add-binaryhttpsleetcodecomproblemsadd-binary">&lt;a href="https://leetcode.com/problems/add-binary">Add Binary&lt;/a>&lt;/h2>
&lt;p>é–‹ä¸€å€‹æ¯”è¼¸å…¥ç¨å¤§çš„ sliceï¼Œå¾æœ€å¾Œä¸€å€‹ bit é–‹å§‹åŠ &lt;/p>
&lt;h2 id="diameter-of-binary-treehttpsleetcodecomproblemsdiameter-of-binary-tree">&lt;a href="https://leetcode.com/problems/diameter-of-binary-tree">Diameter of Binary Tree&lt;/a>&lt;/h2>
&lt;p>é€™é¡Œæˆ‘éŒ¯äº†å¾ˆå¤šæ¬¡ï¼Œå¾Œä¾†ç™¼ç¾å…©å€‹é»ä¹‹é–“çš„æœ€é•·è·¯ç·šæ˜¯å¯ä»¥ä¸é€šéé ‚é»çš„ã€‚&lt;/p>
&lt;p>DFS ç´€éŒ„æœ€é•·çš„å·¦èˆ‡å³&lt;/p>
&lt;h2 id="middle-of-the-linked-listhttpsleetcodecomproblemsmiddle-of-the-linked-list">&lt;a href="https://leetcode.com/problems/middle-of-the-linked-list">Middle of the Linked List&lt;/a>&lt;/h2>
&lt;p>ç”¨å¿«æ…¢æŒ‡é‡ï¼Œå¿«æŒ‡é‡èµ°åˆ°åº•ï¼Œæ…¢æŒ‡é‡å°±åœ¨ä¸­é–“&lt;/p>
&lt;h2 id="maximum-depth-of-binary-treehttpsleetcodecomproblemsmaximum-depth-of-binary-tree">&lt;a href="https://leetcode.com/problems/maximum-depth-of-binary-tree">Maximum Depth of Binary Tree&lt;/a>&lt;/h2>
&lt;p>DFS&lt;/p>
&lt;h2 id="contains-duplicatehttpsleetcodecomproblemscontains-duplicate">&lt;a href="https://leetcode.com/problems/contains-duplicate">Contains Duplicate&lt;/a>&lt;/h2>
&lt;p>map&lt;/p>
- https://krapshsa.github.io/posts/grind-75-week-2/ - Â© 2007 - 2022 krapshsa</description></item><item><title>Grind 75 Week 1 å›é¡§</title><link>https://krapshsa.github.io/posts/grind-75-week-1/</link><pubDate>Sat, 20 Aug 2022 06:27:00 +0000</pubDate><guid>https://krapshsa.github.io/posts/grind-75-week-1/</guid><description>KRAPSHSA'S BLOG https://krapshsa.github.io/posts/grind-75-week-1/ -&lt;h1 id="grind-75-week-1-å›é¡§">Grind 75 Week 1 å›é¡§&lt;/h1>
&lt;hr>
&lt;h2 id="å°å¿ƒå¾—">å°å¿ƒå¾—&lt;/h2>
&lt;p>Week 1 çš„é¡Œç›®éƒ½æ˜¯ Easyï¼Œ(é™¤äº† 53. Maximum Subarray ç¾åœ¨é›£åº¦è¢«é‡æ–°è©•ç´šç‚º Medium)&lt;/p>
&lt;p>é›–ç„¶ä¸è‡³æ–¼å¯«ä¸å‡ºä¾†ï¼Œä½†æ˜¯é‚„æ˜¯æœ‰å¾ˆå®¹æ˜“å¯«éŒ¯çš„é¡Œç›®ã€‚&lt;/p>
&lt;p>ç™¼ç¾æˆ‘å°æ–¼è‡¨ç•Œå€¼çš„æŒæ¡æœ‰é»å·®ï¼š&lt;/p>
&lt;ol>
&lt;li>ç¶“å¸¸ç™¼ç”Ÿè¶Šç•Œ&lt;/li>
&lt;li>ä¸çŸ¥é“å¯ä»¥å‰ªæ (æœ‰æ™‚å€™æœƒéè¿´é‡è¤‡é …ç›®)&lt;/li>
&lt;/ol>
&lt;h2 id="two-sumhttpsleetcodecomproblemstwo-sum">&lt;a href="https://leetcode.com/problems/two-sum">Two Sum&lt;/a>&lt;/h2>
&lt;p>æš´åŠ›æ³•ï¼Œç”¨å…©å€‹ Loop å˜—è©¦å„ç¨®çµ„åˆ&lt;/p>
&lt;h2 id="valid-parentheseshttpsleetcodecomproblemsvalid-parentheses">&lt;a href="https://leetcode.com/problems/valid-parentheses">Valid Parentheses&lt;/a>&lt;/h2>
&lt;p>Stackï¼Œæˆå°çš„å°± pop æ‰ï¼Œä¸ç„¶å°±å¡é€² Stack å…§&lt;/p>
&lt;h2 id="merge-two-sorted-listshttpsleetcodecomproblemsmerge-two-sorted-lists">&lt;a href="https://leetcode.com/problems/merge-two-sorted-lists">Merge Two Sorted Lists&lt;/a>&lt;/h2>
&lt;p>ç›¸åŒå¤§å°ç„¡é †åºï¼Œå°±æŠŠå…©å€‹ List éƒ½è¼ªæµéæ­·å°±å¯ä»¥äº†&lt;/p>
&lt;p>çµ‚æ­¢æ¢ä»¶æ˜¯ List éƒ½ç‚ºç©ºå°±åšå®Œäº†&lt;/p>
&lt;h2 id="best-time-to-buy-and-sell-stockhttpsleetcodecomproblemsbest-time-to-buy-and-sell-stock">&lt;a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock">Best Time to Buy and Sell Stock&lt;/a>&lt;/h2>
&lt;p>è²·é»æ˜¯å„å€‹å¯èƒ½çš„è°·åº•ï¼Œåœ¨å¾å·¦åˆ°å³çš„éç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°æ›´ä½çš„åƒ¹æ ¼ï¼Œå°±æ›´æ–°æ½›åœ¨æœ€ä½³è²·é»ã€‚&lt;/p>
&lt;p>ä½†æ˜¯é€™é¡Œæ²’æœ‰è¦æ±‚æ˜¯å“ªå€‹é»ï¼Œæ‰€ä»¥å°±è¨ˆç®—æœ€å¤§åˆ©æ½¤å­˜èµ·ä¾†å°±å¥½ã€‚&lt;/p>
&lt;h2 id="valid-palindromehttpsleetcodecomproblemsvalid-palindrome">&lt;a href="https://leetcode.com/problems/valid-palindrome">Valid Palindrome&lt;/a>&lt;/h2>
&lt;p>é¡Œç›®å¯«ï¼š&lt;/p>
&lt;blockquote>
&lt;p>Alphanumeric characters include letters and numbers.&lt;/p>
&lt;/blockquote>
&lt;p>æˆ‘æ¼æ‰äº†æ•¸å­—ï¼ŒWA ä¸€æ¬¡ï¼Œé€™é¡Œæˆ‘èŠ±æ¯”è¼ƒå¤šæ™‚é–“ï¼Œå› ç‚ºç¬¬ä¸€æ¬¡å¯« Go ä¸çŸ¥é“åˆ°åº•è¦æ€éº¼åˆ¤æ–·å­—ç¬¦ã€‚&lt;/p>
&lt;h2 id="invert-binary-treehttpsleetcodecomproblemsinvert-binary-tree">&lt;a href="https://leetcode.com/problems/invert-binary-tree">Invert Binary Tree&lt;/a>&lt;/h2>
&lt;p>éè¿´äº¤æ›ï¼Œæ–°çš„å³é‚Šæ˜¯èˆŠçš„å·¦é‚Š &lt;code>invertTree&lt;/code>ï¼Œå·¦é‚Šä¹Ÿæ˜¯åŒæ¨£é“ç†ã€‚&lt;/p>
&lt;h2 id="valid-anagramhttpsleetcodecomproblemsvalid-anagram">&lt;a href="https://leetcode.com/problems/valid-anagram">Valid Anagram&lt;/a>&lt;/h2>
&lt;p>ç”¨ hasmap å­˜å‡ºç¾é »ç‡&lt;/p>
&lt;p>å»¶ä¼¸é¡Œç›®æ˜¯ unicode æ€éº¼è¾¦ï¼Ÿç”¨ go å¯«å¾ˆå®¹æ˜“ï¼Œåšä¸€å€‹ key æ˜¯ rune çš„ map å°±å¥½äº†&lt;/p>
&lt;pre>&lt;code>letterMap := make(map[rune]int)
&lt;/code>&lt;/pre>
&lt;h2 id="binary-searchhttpsleetcodecomproblemsbinary-search">&lt;a href="https://leetcode.com/problems/binary-search">Binary Search&lt;/a>&lt;/h2>
&lt;p>å¿ƒæ…‹æ‰“æ“Šï¼Œé€¢å¯«å¿…éŒ¯&lt;/p>
&lt;p>æ¨è–¦çœ‹ä¸€ä¸‹ Carl å¤§å¤§çš„æ‰‹æ’•äºŒåˆ†æ³•&lt;/p>
&lt;p>&lt;a href="https://www.bilibili.com/video/BV1fA4y1o715">æ‰‹æŠŠæ‰‹å¸¦ä½ æ’•å‡ºæ­£ç¡®çš„äºŒåˆ†æ³• | äºŒåˆ†æŸ¥æ‰¾æ³• | äºŒåˆ†æœç´¢æ³• | LeetCodeï¼š704. äºŒåˆ†æŸ¥æ‰¾_å“”å“©å“”å“©_bilibili&lt;/a>&lt;/p>
&lt;p>å­¸ç¿’é‡é»ï¼š&lt;/p>
&lt;ul>
&lt;li>å¾ªç’°ä¸è®Šé‡&lt;/li>
&lt;li>å€é–“&lt;/li>
&lt;/ul>
&lt;p>é€™é¡Œæˆ‘ä½¿ç”¨å·¦é–‰å³é–‰å€é–“ï¼Œä¹Ÿå°±æ˜¯çµ‚æ­¢æ¢ä»¶æ‡‰è©²æ˜¯ &lt;code>left â‰¤ right&lt;/code>&lt;/p>
&lt;p>ä¸¦è§£ç”¨éçš„å€é–“å°±ä¸æ‡‰è©²å†ç”¨äº†ï¼Œä¸ç„¶æœƒå°è‡´ç„¡çª®çš„åšä¸‹å»&lt;/p>
&lt;h2 id="flood-fillhttpsleetcodecomproblemsflood-fill">&lt;a href="https://leetcode.com/problems/flood-fill">Flood Fill&lt;/a>&lt;/h2>
&lt;p>æˆ‘æŠŠæŒ‡å®šçš„é»çš„ä¸Šä¸‹å·¦å³ä¸Ÿé€² queue è£¡é¢ï¼Œå†æ‹¿å‡ºä¾†è™•ç†ã€‚&lt;/p>
&lt;p>è¦æ³¨æ„é‚Šç•Œï¼Œä»¥åŠä¸è¦é‡è¤‡åšã€‚&lt;/p>
&lt;h2 id="maximum-subarray25ae9972307340bca1b30ddf7ae7fb41">&lt;a href="https://krapshsa.github.io/25ae9972307340bca1b30ddf7ae7fb41">Maximum Subarray&lt;/a>&lt;/h2>
&lt;p>ä¸€å€‹è§£çš„å·¦é‚Šå…ƒç´ ä»¥åŠå³é‚Šå…ƒç´ åªæœ‰å¯èƒ½æ˜¯ï¼š&lt;/p>
&lt;ol>
&lt;li>ç©ºçš„&lt;/li>
&lt;li>å’Œæ˜¯è² çš„ â†’ è‹¥æ˜¯æ­£çš„ï¼Œå¯ä»¥åŠ èµ·ä¾†å½¢æˆæ›´å¤§çš„ subarray&lt;/li>
&lt;/ol>
&lt;p>æƒ³æ³•æ˜¯å¾å·¦åˆ°å³æ‰¾ï¼Œä¸¦ä¸”ç´€éŒ„ï¼š&lt;/p>
&lt;ol>
&lt;li>æœ€å¤§çš„å’Œ â†’ å¯èƒ½è§£&lt;/li>
&lt;li>ç¾åœ¨çš„å’Œ â†’ å¯èƒ½å¯ä»¥è²¢ç»åˆ°è§£ â†’ ä¸€æ—¦ç‚ºè² å°±è¡¨ç¤ºä¸å¯èƒ½æ˜¯è§£ä¸€éƒ¨åˆ† â†’ é‡ç½®è¦è²¢ç»çš„å’Œ&lt;/li>
&lt;/ol>
&lt;p>Edge Caseï¼šå…¨éƒ¨éƒ½æ˜¯è² çš„&lt;/p>
&lt;p>WA&lt;/p>
&lt;pre>&lt;code>func maxSubArray(nums []int) int {
maxSum := nums[0]
curSum := 0
for i := 0; i &amp;lt; len(nums); i++ {
curSum += nums[i]
if curSum &amp;lt; 0 {
curSum = 0
continue
}
if curSum &amp;gt; maxSum {
maxSum = curSum
}
}
return maxSum
}
&lt;/code>&lt;/pre>
&lt;p>AC1&lt;/p>
&lt;pre>&lt;code>func maxSubArray(nums []int) int {
maxSum := nums[0]
curSum := 0
for i := 0; i &amp;lt; len(nums); i++ {
curSum += nums[i]
if curSum &amp;gt; maxSum {
maxSum = curSum
}
if curSum &amp;lt; 0 {
curSum = 0
}
}
return maxSum
}
&lt;/code>&lt;/pre>
&lt;p>AC2&lt;/p>
&lt;pre>&lt;code>func maxSubArray(nums []int) int {
maxSum := nums[0]
curSum := nums[0]
for i := 1; i &amp;lt; len(nums); i++ {
if curSum &amp;lt; 0 {
curSum = nums[i]
} else {
curSum += nums[i]
}
if curSum &amp;gt; maxSum {
maxSum = curSum
}
}
return maxSum
}
&lt;/code>&lt;/pre>
&lt;h2 id="lowest-common-ancestor-of-a-binary-search-treehttpsleetcodecomproblemslowest-common-ancestor-of-a-binary-search-tree">&lt;a href="https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-search-tree">Lowest Common Ancestor of a Binary Search Tree&lt;/a>&lt;/h2>
&lt;p>çµ¦å…©å€‹é» p, q åœ¨éç¨‹ä¸­ï¼Œå¦‚æœæˆ‘æ‰¾åˆ°ä¸€å€‹é»ï¼š&lt;/p>
&lt;ol>
&lt;li>å…¶ä¸­ä¸€å€‹æ˜¯ p æˆ– q â†’ é«˜çš„æ˜¯ ancestor&lt;/li>
&lt;li>p, q åœ¨ä¸åŒé‚Š â†’ è©²é»æ˜¯ ancestor&lt;/li>
&lt;/ol>
&lt;p>å¦å¤–ä¸€å€‹æƒ³æ³•æ˜¯ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>éƒ½åœ¨å·¦å´ â†’ å·¦é‚Šé‚£å€‹é»æ˜¯å¯èƒ½çš„ ancestorï¼Œå¾€å·¦æ‰¾&lt;/p>
&lt;/li>
&lt;li>
&lt;p>éƒ½åœ¨å³å´ â†’ å³é‚Šé‚£å€‹é»æ˜¯å¯èƒ½çš„ ancestorï¼Œå¾€å³æ‰¾&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å…¶ä»–ï¼šæ‰¾åˆ°äº†&lt;/p>
&lt;p>func lowestCommonAncestor(root, p, q *TreeNode) *TreeNode {&lt;br>
lowest := root&lt;/p>
&lt;pre>&lt;code> for true {
if lowest.Val &amp;gt; p.Val &amp;amp;&amp;amp; lowest.Val &amp;gt; q.Val {
lowest = lowest.Left
} else if lowest.Val &amp;lt; p.Val &amp;amp;&amp;amp; lowest.Val &amp;lt; q.Val {
lowest = lowest.Right
} else {
break
}
}
return lowest
&lt;/code>&lt;/pre>
&lt;p>}&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="balanced-binary-treehttpsleetcodecomproblemsbalanced-binary-tree">&lt;a href="https://leetcode.com/problems/balanced-binary-tree">Balanced Binary Tree&lt;/a>&lt;/h2>
&lt;p>éè¿´ï¼šDFS å›å‚³å€¼ç‚ºæ˜¯å¦ balanced ä»¥åŠæ·±åº¦&lt;/p>
&lt;h2 id="linked-list-cyclehttpsleetcodecomproblemslinked-list-cycle">&lt;a href="https://leetcode.com/problems/linked-list-cycle">Linked List Cycle&lt;/a>&lt;/h2>
&lt;p>NeetCode è¬›å¾—å¾ˆæ¸…æ¥š&lt;/p>
&lt;p>&lt;a href="https://www.youtube.com/watch?v=gBTe7lFR3vc">Linked List Cycle - Floyd&amp;rsquo;s Tortoise and Hare - Leetcode 141 - Python&lt;/a>&lt;/p>
&lt;p>æ²’æœ‰ cycle â†’ æœ€å¾Œæœƒèµ°åˆ° nil&lt;/p>
&lt;p>æœ‰ cycle â†’ å¿«æ…¢æŒ‡é‡ç›¸é‡&lt;/p>
&lt;p>é€™é¡Œçš„å»¶ä¼¸é¡Œæ˜¯æ±‚è§£ cycle çš„é–‹ç«¯&lt;/p>
- https://krapshsa.github.io/posts/grind-75-week-1/ - Â© 2007 - 2022 krapshsa</description></item><item><title>iOS ç€è¦½å™¨ç„¡æ³•ç€è¦½é«˜ DPI çš„ pdf</title><link>https://krapshsa.github.io/posts/ios-dpi-pdf/</link><pubDate>Mon, 15 Aug 2022 11:26:00 +0000</pubDate><guid>https://krapshsa.github.io/posts/ios-dpi-pdf/</guid><description>KRAPSHSA'S BLOG https://krapshsa.github.io/posts/ios-dpi-pdf/ -&lt;h1 id="ios-ç€è¦½å™¨ç„¡æ³•ç€è¦½é«˜-dpi-çš„-pdf">iOS ç€è¦½å™¨ç„¡æ³•ç€è¦½é«˜ DPI çš„ pdf&lt;/h1>
&lt;h2 id="èµ·å› ">èµ·å› &lt;/h2>
&lt;p>NextCloud æœ‰ä¸€å€‹åŠŸèƒ½ (PDF Viewer)ï¼Œ&lt;/p>
&lt;p>å¯ä»¥è®“æˆ‘åœ¨æ‰‹æ©Ÿç€è¦½å™¨ä¸Šç›´æ¥ç€è¦½ PDFã€‚&lt;/p>
&lt;p>ä½†æ˜¯ä»Šå¤©æœ‰ä¸€å€‹ç”¨æƒæå™¨æƒä¸Šä¾†çš„ PDF å»ç„¡æ³•æ­£å¸¸åœ¨æ‰‹æ©Ÿç«¯ç€è¦½&lt;/p>
&lt;h2 id="ç—‡ç‹€">ç—‡ç‹€&lt;/h2>
&lt;p>ç€è¦½ pdf çš„æ™‚å€™æœƒä¸€ç‰‡ç©ºç™½ï¼Œä¸¦ä¸”ç”¢ç”ŸéŒ¯èª¤è¨Šæ¯&lt;/p>
&lt;pre>&lt;code>Canvas area exceeds the maximum limit (width * height &amp;gt; 16777216).
&lt;/code>&lt;/pre>
&lt;p>ç¶“æŸ¥è©¢åŸä¾†æ˜¯ iOS çš„ &lt;code>canvas&lt;/code> element æœ‰å¤§å°é™åˆ¶ï¼š&lt;/p>
&lt;p>&lt;a href="https://pqina.nl/blog/canvas-area-exceeds-the-maximum-limit/">Canvas Area Exceeds The Maximum Limit&lt;/a>&lt;/p>
&lt;p>è·Ÿ PDF.js ç„¡é—œï¼Œæ‰€ä»¥é€™æ¢ issue è‡³ä»Šä¹Ÿæ˜¯ç„¡è§£ï¼š&lt;/p>
&lt;h2 id="è§£æ±ºæ–¹æ³•">è§£æ±ºæ–¹æ³•&lt;/h2>
&lt;p>æ¬é‹ &lt;code>askubuntu&lt;/code> çš„è§£æ³•ï¼Œå…ˆåœ¨ Server Side ç”¨ ghost script æŠŠ DPI æ”¹å°å°±å¥½äº†ï¼š&lt;/p>
&lt;pre>&lt;code>gs -sDEVICE=pdfwrite \
-dCompatibilityLevel=1.4 \
-dPDFSETTINGS=/ebook \
-dNOPAUSE \
-dQUIET \
-dBATCH \
-sOutputFile=output.pdf input.pdf
&lt;/code>&lt;/pre>
&lt;ul>
&lt;li>
&lt;p>&lt;code>-dCompatibilityLevel&lt;/code> (ä¸çŸ¥é“æœ‰ä»€éº¼ç”¨)&lt;/p>
&lt;p>&lt;a href="https://acrobatusers.com/tutorials/understanding-pdf-compatibility-levels/">Understanding PDF compatibility levels in Acrobat 9&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>-dPDFSETTINGS&lt;/code> ç”¨ä¾†èª¿æ•´ DPI&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>-dNOPAUSE&lt;/code> åœç”¨æ¯é çµæŸæ™‚çš„æç¤ºå’Œæš«åœ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>-dQUIET&lt;/code> å®‰éœåŸ·è¡Œï¼Œå„˜é‡ä¸è¼¸å‡ºæ—¥èªŒ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>-dBATCH&lt;/code> åŸ·è¡Œåˆ°æœ€å¾Œä¸€é é€€å‡º&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="åƒè€ƒè³‡æ–™">åƒè€ƒè³‡æ–™&lt;/h2>
&lt;p>&lt;a href="https://apps.nextcloud.com/apps/files_pdfviewer">PDF viewer&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://pqina.nl/blog/canvas-area-exceeds-the-maximum-limit/">Canvas Area Exceeds The Maximum Limit&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://askubuntu.com/questions/113544/how-can-i-reduce-the-file-size-of-a-scanned-pdf-file">How can I reduce the file size of a scanned PDF file?&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://www.ghostscript.com/doc/current/VectorDevices.htm#COMMON">High Level Output Devices&lt;/a>&lt;/p>
- https://krapshsa.github.io/posts/ios-dpi-pdf/ - Â© 2007 - 2022 krapshsa</description></item><item><title>JB å°æŠ€å·§</title><link>https://krapshsa.github.io/posts/jb/</link><pubDate>Fri, 12 Aug 2022 11:01:00 +0000</pubDate><guid>https://krapshsa.github.io/posts/jb/</guid><description>KRAPSHSA'S BLOG https://krapshsa.github.io/posts/jb/ -&lt;h1 id="jb-å°æŠ€å·§">JB å°æŠ€å·§&lt;/h1>
&lt;p>&lt;a href="https://stackoverflow.com/questions/50563010/how-do-i-preserve-search-results-in-intellij-idea">How do I preserve search results in IntelliJ IDEA&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://blog.jetbrains.com/webstorm/2022/08/fomo-digest-2/">FOMO Digest #2: Top 5 Tips for Angular Development With JetBrains IDEs | The WebStorm Blog&lt;/a>&lt;/p>
- https://krapshsa.github.io/posts/jb/ - Â© 2007 - 2022 krapshsa</description></item><item><title>ç°¡æ˜“ C Mock â€” wrapper function</title><link>https://krapshsa.github.io/posts/c-mock-wrapper-function/</link><pubDate>Sat, 06 Aug 2022 03:12:00 +0000</pubDate><guid>https://krapshsa.github.io/posts/c-mock-wrapper-function/</guid><description>KRAPSHSA'S BLOG https://krapshsa.github.io/posts/c-mock-wrapper-function/ -&lt;h1 id="ç°¡æ˜“-c-mock--wrapper-function">ç°¡æ˜“ C Mock â€” wrapper function&lt;/h1>
&lt;h2 id="èµ·å› ">èµ·å› &lt;/h2>
&lt;p>å¹«ä¸€å€‹èˆŠçš„ Lib å¯«æ¸¬è©¦çš„æ™‚å€™æœƒå»è®€ configï¼Œ&lt;/p>
&lt;p>ä½†æ˜¯é€™å€‹è·¯å¾‘åœ¨æˆ‘çš„ CI ç’°å¢ƒä¸¦ä¸å­˜åœ¨ï¼Œ&lt;/p>
&lt;p>é€šå¸¸æˆ‘å¯« php çš„æ™‚å€™ï¼Œé‡å°é€™ç¨®å¤–éƒ¨ç›¸ä¾å°±ç”¨ function åŒ…èµ·ä¾†å† Mock æ‰ï¼Œ&lt;/p>
&lt;p>ä½†æ˜¯ C æˆ‘å·²ç¶“å¿˜å¾—å·®ä¸å¤šäº†ï¼Œæƒ³æ‰¾ä¸€å€‹ç°¡å–®å¯ä»¥åšåˆ°é¡ä¼¼æ•ˆæœçš„æ–¹æ³•ã€‚&lt;/p>
&lt;h2 id="ç›®å‰è§£æ³•">ç›®å‰è§£æ³•&lt;/h2>
&lt;p>ä¸å›‰å”†ï¼Œå…ˆä¸Š code&lt;/p>
&lt;p>&lt;a href="https://github.com/krapshsa/c-native-mock">GitHub - krapshsa/c-native-mock&lt;/a>&lt;/p>
&lt;p>é€™å€‹ç°¡å–®çš„ Case æ˜¯é€™æ¨£ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;code>main()&lt;/code> å‘¼å« &lt;code>foo()&lt;/code> ï¼Œ &lt;code>foo()&lt;/code> å‘¼å« &lt;code>config_load()&lt;/code>&lt;/p>
&lt;p>&lt;img src="c-mock-9adcb40d-b2d3-4874-9829-170784e9f812.png" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æˆ‘æƒ³è¦ä¸æ”¹è®Š &lt;code>foo.c&lt;/code> ï¼Œè®“æ¸¬è©¦ (&lt;code>main.c&lt;/code> ) å¯ä»¥ä¸å»çœŸçš„ç”¨åˆ° &lt;code>config_load()&lt;/code>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>å…¶å¯¦é€™å°±ç›¸ç•¶æ–¼å¯«æ¸¬è©¦ï¼š&lt;/p>
&lt;p>&lt;code>main()&lt;/code> æ˜¯ Testï¼Œè€Œ &lt;code>foo.c&lt;/code> çš„ &lt;code>foo()&lt;/code> æ˜¯æˆ‘çš„ SUT (System UnderÂ Test)ã€‚&lt;/p>
&lt;p>æ‰‹æ³•å°±æ˜¯ Wrapï¼Œæ ¹æ“š &lt;code>ld&lt;/code> çš„ Man Pageï¼š&lt;/p>
&lt;blockquote>
&lt;p>&lt;code>--wrap=symbol&lt;/code>&lt;br>
Use a wrapper function for symbol. Any undefined reference to symbol will be resolved to &amp;ldquo;&lt;code>__wrap_symbol&lt;/code>&amp;rdquo;. Any undefined reference to &amp;ldquo;&lt;code>__real_symbol&lt;/code>&amp;rdquo; will be resolved to symbol.&lt;/p>
&lt;/blockquote>
&lt;p>æ“ä½œæ­¥é©Ÿï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Caller å¯«ä¸€å€‹åŠ ä¸Š &lt;code>__wrap_&lt;/code> é–‹é ­çš„å‡½å¼ï¼Œç”¨ä¾†æ›æ‰æŸä¸€å€‹å¯¦ä½œã€‚&lt;/p>
&lt;p>ä¾‹å¦‚æ›¿æ›æ‰ &lt;code>config_load&lt;/code> æˆ‘å°±è¦å®šç¾©ä¸€å€‹ &lt;code>__wrap_config_load&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Caller å¯ä»¥ä½¿ç”¨åŠ ä¸Š &lt;code>__real_&lt;/code> é–‹é ­çš„å‡½å¼ï¼Œå°±å¯ä»¥å‘¼å«åˆ°åŸå§‹çš„å¯¦ä½œ (Optional)ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç·¨è­¯çš„åƒæ•¸åŠ ä¸Š &lt;code>-Wl,--wrap=&amp;lt;symbol&amp;gt;&lt;/code>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>å¯ä»¥ç”¨ nm æŒ‡ä»¤çœ‹ä¸€ä¸‹ç·¨å‡ºä¾†çš„ &lt;code>.o&lt;/code>&lt;/p>
&lt;p>T: è¡¨ç¤ºåœ¨ Text Section æ‰¾å¾—åˆ°é€™å€‹ symbol&lt;/p>
&lt;p>U: è¡¨ç¤ºé€™å€‹ symbol æ˜¯ undefined&lt;/p>
&lt;pre>&lt;code># nm config.o
0000000000000000 T config_load
U fclose
U fopen
U fseek
# nm foo.o
U config_load
0000000000000000 T foo
# nm main.o
0000000000000000 T __wrap_config_load
U foo
0000000000000011 T main
U puts
&lt;/code>&lt;/pre>
&lt;h2 id="å¸¸çŠ¯éŒ¯èª¤">å¸¸çŠ¯éŒ¯èª¤&lt;/h2>
&lt;p>å¦‚æœ &lt;code>config_load&lt;/code> å®šç¾©åœ¨ &lt;code>foo.c&lt;/code> è£¡é¢ï¼Œè©¦è‘—è·‘çœ‹çœ‹ï¼š&lt;/p>
&lt;pre>&lt;code># make main
gcc -c main.c
gcc -c foo.c
gcc -Wl,--wrap=config_load -o main main.o foo.o
# ./main
Segmentation fault
&lt;/code>&lt;/pre>
&lt;p>çµæœé€™æ¨£æ˜¯ä¸è¡Œçš„ï¼Œç”¨ nm æŸ¥çœ‹ï¼š&lt;/p>
&lt;pre>&lt;code># nm foo.o
0000000000000011 T config_load
U fclose
0000000000000000 T foo
U fopen
U fseek
# nm main.o
0000000000000000 T __wrap_config_load
U foo
0000000000000011 T main
U puts
&lt;/code>&lt;/pre>
&lt;p>è¦æŠŠ ld å‘Šè¨´æˆ‘å€‘çš„ä½¿ç”¨æ–¹æ³•æ”¾åœ¨å¿ƒä¸Šï¼š&lt;/p>
&lt;blockquote>
&lt;p>Any undefined reference to symbol will be resolved to &amp;ldquo;&lt;code>__wrap_symbol&lt;/code>&amp;rdquo;&lt;/p>
&lt;/blockquote>
&lt;p>å‘¼å« &lt;code>config_load&lt;/code> ä¸¦ä¸æ˜¯ undefinedï¼Œ&lt;/p>
&lt;p>æ‰€ä»¥é€™å‘Šè¨´æˆ‘å€‘å¯¦ä½œ &amp;amp; å¯«æ¸¬è©¦çš„æ™‚å€™æŠŠè¦ Mock çš„æ±è¥¿åˆ‡å‡ºå»ï¼Œ&lt;/p>
&lt;p>å°±å¯ä»¥ç”¨é€™å€‹æ‰‹æ³•ä¾†æ›¿æ›æ‰å¯¦ä½œï¼Œä¹Ÿå°±æ˜¯èªªè¦æŠŠç›¸ä¾ä½†æ˜¯è·è²¬ä¸æ‡‰è©²å±¬æ–¼æˆ‘çš„ Code å¦å¤–æ”¾ã€‚&lt;/p>
&lt;h2 id="å¦å¤–ä¸€å€‹æ–¹æ³•-ifndef--define--endif">å¦å¤–ä¸€å€‹æ–¹æ³•ï¼š &lt;code>#ifndef ... #define ... #endif&lt;/code>&lt;/h2>
&lt;p>å»¶ä¼¸è‡ª &lt;code>undefined&lt;/code> çš„æƒ³æ³•ï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥ç›´æ¥æ”¹å¯« &lt;code>foo.c&lt;/code>&lt;/p>
&lt;p>&lt;code>foo.c&lt;/code>&lt;/p>
&lt;pre>&lt;code>#include &amp;quot;stdio.h&amp;quot;
#include &amp;quot;config.h&amp;quot;
#include &amp;quot;foo.h&amp;quot;
#ifndef config_load
#define config_load() my_config_load()
#endif
void my_config_load() {
printf(&amp;quot;wrap\n&amp;quot;);
}
void foo() {
config_load();
}
&lt;/code>&lt;/pre>
&lt;p>&lt;code>main.c&lt;/code>&lt;/p>
&lt;pre>&lt;code>#include &amp;quot;foo.h&amp;quot;
int main() {
foo();
return 0;
}
&lt;/code>&lt;/pre>
&lt;p>&lt;code>Makefile&lt;/code>&lt;/p>
&lt;pre>&lt;code>config.o:
gcc -c config.c
foo.o:
gcc -c foo.c
main.o:
gcc -c main.c
main: main.o foo.o config.o
gcc -o main main.o foo.o config.o
clean:
rm *.o main
&lt;/code>&lt;/pre>
&lt;p>æ‡‰è©²æ˜¯å¯ä»¥æ­é… Target-specific Variable Values ç·¨å‡º production / development çš„ &lt;code>foo.o&lt;/code>&lt;/p>
&lt;p>æ„Ÿè¬å¤§ç¥åŒäº‹çµ¦çš„åƒè€ƒè³‡æ–™ï¼š&lt;/p>
&lt;p>&lt;a href="https://www.gnu.org/software/make/manual/html_node/Target_002dspecific.html">Target-specific (GNU make)&lt;/a>&lt;/p>
&lt;h2 id="åƒè€ƒè³‡æ–™">åƒè€ƒè³‡æ–™&lt;/h2>
&lt;p>&lt;a href="https://stackoverflow.com/questions/31156327/how-to-mock-function-in-c-when-its-caller-function-is-defined-in-same-file">How to mock function in C when its caller function is defined in same file?&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://stackoverflow.com/questions/617554/override-a-function-call-in-c">Override a function call in C&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://stackoverflow.com/questions/43183060/how-to-wrap-existing-function-in-c">How to wrap existing function in C&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://orionlin.pixnet.net/blog/post/96013596-wrap-function%E7%9A%84%E4%BD%BF%E7%94%A8">wrap functionçš„ä½¿ç”¨ @ Orion&amp;rsquo;s blog :: ç—å®¢é‚¦ ::&lt;/a>&lt;/p>
- https://krapshsa.github.io/posts/c-mock-wrapper-function/ - Â© 2007 - 2022 krapshsa</description></item><item><title>C Unit Test - Criterion ç°¡å–®ç¯„ä¾‹</title><link>https://krapshsa.github.io/posts/c-unit-test-criterion/</link><pubDate>Thu, 04 Aug 2022 17:52:00 +0000</pubDate><guid>https://krapshsa.github.io/posts/c-unit-test-criterion/</guid><description>KRAPSHSA'S BLOG https://krapshsa.github.io/posts/c-unit-test-criterion/ -&lt;h1 id="c-unit-test---criterion-ç°¡å–®ç¯„ä¾‹">C Unit Test - Criterion ç°¡å–®ç¯„ä¾‹&lt;/h1>
&lt;h2 id="èµ·å› ">èµ·å› &lt;/h2>
&lt;p>è¦ç”¨ä¸€å€‹å…¬å¸å¾ˆä¹…ä»¥å‰è‡ªå·±å¯«çš„ C Libï¼Œæ²’æœ‰æ–‡ä»¶æ‰€ä»¥ä¸çŸ¥é“è¡Œç‚ºæ˜¯ä»€éº¼ã€‚&lt;/p>
&lt;p>ä½¿ç”¨çš„éç¨‹ä¸­æœ‰ç™¼ç¾å•é¡Œï¼Œå°±é€²è¡Œä¸€äº›ä¿®æ­£ã€‚&lt;/p>
&lt;p>æƒ³èªªå¹«ä»–åŠ ä¸Šä¸€äº›æ¸¬è©¦æ¡ˆä¾‹ï¼Œå¹«åŠ©ä¹‹å¾Œè¦ä½¿ç”¨çš„äººã€‚&lt;/p>
&lt;h2 id="ç’°å¢ƒ">ç’°å¢ƒ&lt;/h2>
&lt;h3 id="å»ºç½®æ–¹æ³•">å»ºç½®æ–¹æ³•&lt;/h3>
&lt;p>ç”±æ–¼å…¬å¸æ˜¯ç”¨ CentOS / RHEL / Oracleï¼Œæˆ‘æŒ‘äº†ä¸€å€‹å·®ä¸å¤šçš„ image ä¾†å»º CI&lt;/p>
&lt;p>é‡é»æ˜¯ rpm æˆ‘å¾ github ä¸Šé¢è£ï¼Œå°±å¯ä»¥ç›´æ¥ &lt;code>-l&lt;/code> ä½¿ç”¨ä»–çš„ Lib&lt;/p>
&lt;p>å…¶ä»–æ˜¯é€™å€‹ C lib éœ€è¦çš„å…¶ä»– Libï¼Œè·Ÿåº•ä¸‹ç¯„ä¾‹ç„¡é—œ&lt;/p>
&lt;p>&lt;code>Dockerfile&lt;/code>&lt;/p>
&lt;pre>&lt;code>FROM oraclelinux:8.6
RUN yum install -y gcc make pcre pcre-devel
RUN yum --enablerepo=ol8_codeready_builder install -y glibc glibc-common glibc-devel glibc-headers glibc-static
RUN rpm -ivh https://github.com/samber/criterion-rpm-package/releases/download/2.3.3/libcriterion-devel-2.3.3-2.el7.x86_64.rpm
&lt;/code>&lt;/pre>
&lt;h2 id="code">Code&lt;/h2>
&lt;p>&lt;code>sut.h&lt;/code>&lt;/p>
&lt;pre>&lt;code>#ifndef TEST_CRITERION_SUT_H
#define TEST_CRITERION_SUT_H
typedef struct result
{
char *begin;
} Result;
extern int doSomething(char *pContent, Result **ppResult);
extern void sutFree(Result **ppResult);
#endif //TEST_CRITERION_SUT_H
&lt;/code>&lt;/pre>
&lt;p>&lt;code>sut.c&lt;/code>&lt;/p>
&lt;pre>&lt;code>#include &amp;lt;stdlib.h&amp;gt;
#include &amp;lt;string.h&amp;gt;
#include &amp;quot;sut.h&amp;quot;
int doSomething(char *pContent, Result **ppResult)
{
if (0 == strcmp(pContent, &amp;quot;INPUT_1&amp;quot;)) {
*ppResult = (Result*)malloc(sizeof(Result));
(*ppResult)-&amp;gt;begin = &amp;quot;OUTPUT_1&amp;quot;;
return 1;
}
return 0;
}
void sutFree(Result **ppResult)
{
if(ppResult != NULL &amp;amp;&amp;amp; *ppResult != NULL) {
free(*ppResult);
*ppResult = NULL;
}
}
&lt;/code>&lt;/pre>
&lt;p>&lt;code>test.c&lt;/code>&lt;/p>
&lt;pre>&lt;code>#include &amp;lt;string.h&amp;gt;
#include &amp;lt;criterion/criterion.h&amp;gt;
#include &amp;quot;sut.h&amp;quot;
int ret = 0;
int rule = -1;
Result *s = NULL;
void setup(void) {
ret = 0;
rule = -1;
s = NULL;
}
void teardown(void) {
if (NULL != s) {
sutFree(&amp;amp;s);
}
}
void givenContent(char *content) {
ret = doSomething(content, &amp;amp;s);
}
void returnValueShouldBeSuccess() {
cr_assert(ret &amp;gt; 0);
}
void returnValueShouldBeFailed() {
cr_assert(ret &amp;lt;= 0);
}
void matchContentShouldBe(char *result) {
cr_assert_eq(0, strcmp(result, s-&amp;gt;begin));
}
TestSuite(single_rule_suite, .init = setup, .fini = teardown);
Test(single_rule_suite, test_success) {
givenContent(&amp;quot;INPUT_1&amp;quot;);
returnValueShouldBeSuccess();
matchContentShouldBe(&amp;quot;OUTPUT_1&amp;quot;);
}
Test(single_rule_suite, test_failed) {
givenContent(&amp;quot;INPUT_2&amp;quot;);
returnValueShouldBeFailed();
}
&lt;/code>&lt;/pre>
&lt;p>&lt;code>Makefile&lt;/code>&lt;/p>
&lt;pre>&lt;code>CC = gcc -Wall
sut.o: sut.c
${CC} -c sut.c
test.o: test.c
${CC} -c test.c
test: clean test.o sut.o
${CC} -o test test.o sut.o -lcriterion
./test
clean:
rm -f *.o
&lt;/code>&lt;/pre>
&lt;h2 id="çµæœ">çµæœ&lt;/h2>
&lt;pre>&lt;code>./test
[====] Synthesis: Tested: 2 | Passing: 2 | Failing: 0 | Crashing: 0
&lt;/code>&lt;/pre>
&lt;h2 id="ç°¡æ˜“èªªæ˜">ç°¡æ˜“èªªæ˜&lt;/h2>
&lt;p>&lt;a href="https://criterion.readthedocs.io/en/master/starter.html?highlight=suite#configuration-reference">Getting started - Criterion 2.4.1-rc-1-g56f8f1a-dirty documentation&lt;/a>&lt;/p>
&lt;h3 id="test-åŸºæœ¬ç”¨æ³•">Test åŸºæœ¬ç”¨æ³•&lt;/h3>
&lt;pre>&lt;code>Test(suite_name, test_name, .init = setup, .fini = teardown) {
// test contents
}
&lt;/code>&lt;/pre>
&lt;h3 id="test-suite-åŸºæœ¬ç”¨æ³•">Test Suite åŸºæœ¬ç”¨æ³•&lt;/h3>
&lt;p>å®˜æ–¹çµ¦å‡ºçš„ä¾‹å­&lt;/p>
&lt;pre>&lt;code>TestSuite(suite_name, [params...]);
Test(suite_name, test_1) {
}
Test(suite_name, test_2) {
}
&lt;/code>&lt;/pre>
&lt;p>æˆ‘å¯¦éš›ä¸Šæ˜¯é€™æ¨£ç”¨ï¼š&lt;/p>
&lt;pre>&lt;code>TestSuite(single_rule_suite, .init = setup, .fini = teardown);
Test(single_rule_suite, test_success) {
...
}
Test(single_rule_suite, test_failed) {
...
}
&lt;/code>&lt;/pre>
&lt;p>å› ç‚ºå¤§å®¶çš„åˆå§‹åŒ–è·ŸéŠ·æ¯€éƒ½ä¸€æ¨£ï¼Œä¸éœ€è¦åœ¨ &lt;code>Test&lt;/code> è£¡é¢é‡è¤‡å¯«&lt;/p>
&lt;h2 id="åƒè€ƒè³‡æ–™">åƒè€ƒè³‡æ–™&lt;/h2>
- https://krapshsa.github.io/posts/c-unit-test-criterion/ - Â© 2007 - 2022 krapshsa</description></item><item><title>è¨˜ä¸€æ¬¡ MariaDB CPU Loading æ»¿è¼‰æŸ¥ä¿®éç¨‹</title><link>https://krapshsa.github.io/posts/mariadb-cpu-loading/</link><pubDate>Thu, 04 Aug 2022 10:46:00 +0000</pubDate><guid>https://krapshsa.github.io/posts/mariadb-cpu-loading/</guid><description>KRAPSHSA'S BLOG https://krapshsa.github.io/posts/mariadb-cpu-loading/ -&lt;h1 id="è¨˜ä¸€æ¬¡-mariadb-cpu-loading-æ»¿è¼‰æŸ¥ä¿®éç¨‹">è¨˜ä¸€æ¬¡ MariaDB CPU Loading æ»¿è¼‰æŸ¥ä¿®éç¨‹&lt;/h1>
&lt;h2 id="èµ·å› ">èµ·å› &lt;/h2>
&lt;p>å®¢æˆ¶ç’°å¢ƒçš„ MariaDB æŠŠ CPU Resource éƒ½åƒæ»¿äº†ï¼Œ&lt;/p>
&lt;p>ç”¨ &lt;code>SHOW PROCESSLIST&lt;/code> æŸ¥è©¢æœ‰çœ‹åˆ°å¥½å¹¾æ¢æ…¢çš„æŸ¥è©¢ï¼Œäº‚æ§æ‰“é³¥èª¿æ•´äº†å‰å¹¾ç­†éƒ½ä¸è¦‹æ”¹å–„ã€‚&lt;/p>
&lt;p>ç‚ºäº†è¦å¯ä»¥æ¯”è¼ƒç²¾æº–åœ°æ”¹å–„å•é¡Œï¼Œåšäº†ä¸€äº›ç ” (goo) ç©¶ (gle)ã€‚&lt;/p>
&lt;h2 id="ç—‡ç‹€">ç—‡ç‹€&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>ç”¨ TOP åªçœ‹å¾—åˆ° CPU åƒæ»¿ï¼Œä½†æ˜¯è¨˜æ†¶é«”çš„ç‹€æ³æ˜¯ OK çš„&lt;/p>
&lt;p>&lt;img src="Screen_Shot_2022-08-04_at_6-933c0ea7-374b-425e-a8c0-48a7b22d5b20.52.53_PM.png" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ATOP çœ‹èµ·ä¾†ç¡¬ç¢Ÿä¹Ÿä¸å¿™ï¼Œç”±æ–¼æœå‹™è·Ÿ DB å»ºåœ¨åŒä¸€å°ï¼Œæ‡‰è©²ä¹Ÿä¸æ˜¯ç¶²è·¯å•é¡Œ&lt;/p>
&lt;p>&lt;img src="Screen_Shot_2022-08-04_at_6-4c435945-644d-404e-81b1-f95682c8e20e.54.25_PM.png" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç´„å¥½åœæœå‹™ä¹‹å¾Œï¼Œä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€å…ˆ &lt;code>OPTIMIZE TABLE&lt;/code> ä¹Ÿæ²’æœ‰ç”¨&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¡ä½çš„å‰å¹¾åéƒ½æ˜¯ UPDATEï¼Œä¸€åº¦æ‡·ç–‘æ˜¯å¯«å…¥çš„å•é¡Œï¼Œä½†æ˜¯å¯¦éš›æ‰¾ä¸€å€‹æ¸¬è©¦è³‡æ–™ Insert / Update éƒ½å¾ˆå¿«ï¼ŒæŠŠé€™å€‹ UPDATE ç›¸é—œçš„ Code æ‹”æ‰ä¹Ÿæ²’æœ‰ç”¨ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="ä¿®å¾©æµç¨‹">ä¿®å¾©æµç¨‹&lt;/h2>
&lt;h3 id="å€¼å¾—åƒè€ƒçš„æµç¨‹">å€¼å¾—åƒè€ƒçš„æµç¨‹&lt;/h3>
&lt;p>&lt;a href="https://www.percona.com/blog/2020/04/23/a-simple-approach-to-troubleshooting-high-cpu-in-mysql/">A Simple Approach to Troubleshooting High CPU in MySQL - Percona Database Performance Blog&lt;/a>&lt;/p>
&lt;p>åƒè€ƒäº† Percona çµ¦å‡ºçš„æµç¨‹ï¼Œå¯«å¾—æŒºä¸éŒ¯çš„ ğŸ‘&lt;/p>
&lt;p>é›–ç„¶æˆ‘çš„Â DB ç‰ˆæœ¬å¤ªèˆŠäº†æ²’æœ‰ç”¨ (å¿…é ˆè¦ MariaDB 10.5 ä»¥ä¸Šæ‰æœ‰ &lt;code>THREAD_OS_ID&lt;/code> )ã€‚&lt;/p>
&lt;p>ä¸éé‚„æ˜¯è¬›ä¸€ä¸‹ï¼Œæ€è·¯æ˜¯ï¼š&lt;/p>
&lt;ol>
&lt;li>å–®å¾ pid åªæœƒçœ‹åˆ° process å¾ˆå¿™ï¼Œçœ‹ä¸å‡ºæ˜¯å“ªå€‹ command å¾ˆå¿™ï¼Œå› ç‚ºæ˜¯ multi-threadã€‚&lt;/li>
&lt;li>æƒ³è¾¦æ³•æ‰¾åˆ° thread id ï¼Œçœ‹çœ‹æ˜¯å“ªå€‹ thread åœ¨å¿™ã€‚&lt;/li>
&lt;li>æœ‰ thread id ä¹‹å¾Œå°±å¯ä»¥ç”¨ï¼Œ &lt;code>performance_schema.threads&lt;/code> æ‰¾åˆ° &lt;code>THREAD_OS_ID&lt;/code> å°æ‡‰çš„ Commandã€‚&lt;/li>
&lt;/ol>
&lt;h3 id="æˆ‘çš„æµç¨‹">æˆ‘çš„æµç¨‹&lt;/h3>
&lt;p>å› ç‚ºæˆ‘çš„ MariaDB é‚„æ²’æœ‰å‡ç´šåˆ° 10.5ï¼Œæ‰€ä»¥æˆ‘æ˜¯å»çœ‹ process list ä¸­æ¯”è¼ƒæ…¢çš„ queryã€‚&lt;/p>
&lt;p>å°é€™äº› Query æŸ¥çœ‹ query planï¼Œæœ€å¾Œæ‰¾åˆ°ä¸€ç­† &lt;code>SELECT&lt;/code> ï¼Œåœ¨æŠŠæœå‹™åˆ‡æ–·çš„ç‹€æ…‹ä¸‹å°±è¦å››ç§’ã€‚&lt;/p>
&lt;pre>&lt;code>describe SELECT * FROM problem_table WHERE id=100 AND `path` LIKE 'æŸå€‹é—œéµå­—%';
+------+-------------+---------------+------+-------------------------------------------------------+-----------------+---------+-------+---------+-------------+
| id | select_type | table | type | possible_keys | key | key_len | ref | rows | Extra |
+------+-------------+---------------+------+-------------------------------------------------------+-----------------+---------+-------+---------+-------------+
| 1 | SIMPLE | problem_table | ref | index_1,index_2,index_3 | index_3 | 4 | const | 4213770 | Using where |
+------+-------------+---------------+------+-------------------------------------------------------+-----------------+---------+-------+---------+-------------+
&lt;/code>&lt;/pre>
&lt;p>çœ‹åˆ° &lt;code>index_3&lt;/code> (è¢«æˆ‘ç¢¼æ‰äº†) æ˜¯ &lt;code>fid&lt;/code>+ &lt;code>extra&lt;/code> çš„è¯åˆç´¢å¼•ï¼Œå° &lt;code>path&lt;/code> æ²’æœ‰å¹«åŠ©&lt;/p>
&lt;p>è¦ºå¾—æ‡‰è©²æ˜¯æ²’æœ‰é©åˆçš„ Indexï¼Œæ‰æœƒé€™éº¼ä¹…ã€‚&lt;/p>
&lt;p>é‡å° &lt;code>fid&lt;/code> + &lt;code>path&lt;/code> å»å»º Indexï¼Œæœ€å¾Œå°±è§£æ±ºå•é¡Œäº†ï¼š&lt;/p>
&lt;pre>&lt;code>create index index_4 on problem_table(field_1,field_2(768));
Query OK, 0 rows affected (1 min 29.487 sec)
describe SELECT * FROM problem_table WHERE fid=100 AND `path` LIKE 'æŸå€‹é—œéµå­—%';
+------+-------------+---------------+-------+-------------------------------------------------------+-----------------+---------+-------+---------+------------------------------------+
| id | select_type | table | type | possible_keys | key | key_len | ref | rows | Extra |
+------+-------------+---------------+-------+-------------------------------------------------------+-----------------+---------+-------+---------+------------------------------------+
| 1 | SIMPLE | problem_table | range | index_1,index_2,index_3,index_4 | index_4 | 2311 | NULL | 1 | Using index condition; Using where |
+------+-------------+---------------+-------+-------------------------------------------------------+-----------------+---------+-------+---------+------------------------------------+
MariaDB [owncloud]&amp;gt; ELECT * FROM problem_table WHERE fid=100 AND `path` LIKE 'æŸå€‹é—œéµå­—%';
Empty set (0.000 sec)
&lt;/code>&lt;/pre>
&lt;p>SLA æœªé”æ‰¿è«¾æ˜¯è¦è¢«ç½°çš„ï¼Œç•¶æ™‚é€™å€‹æ–¹æ³•æœ‰ç”¨å°±å…ˆé ‚è‘—ç”¨äº†ã€‚&lt;/p>
&lt;h2 id="äº‹å¾Œè«¸è‘›">äº‹å¾Œè«¸è‘›&lt;/h2>
&lt;p>åœ¨ç¾å ´æ™‚æ†‘è‘—ä¸€è‚¡ç›´è¦ºï¼Œè¦ºå¾—ç”¨åˆ° &lt;code>fid&lt;/code> + &lt;code>path&lt;/code> å°±å»å»ºæ§‹é€™å…©å€‹çš„è¯åˆç´¢å¼•ï¼Œ&lt;/p>
&lt;p>é‚£åˆ°åº•é€™æ¨£å»º index ç‚ºä»€éº¼æœ‰ç”¨ï¼Œè¦ä¾†äº‹å¾Œè«¸è‘›ä¸€ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;code>fid&lt;/code> æ˜¯å¤–ä¾†éµï¼Œ &lt;code>fid&lt;/code> ç‚º 100 çš„é€™å€‹ caseï¼Œåœ¨ DB ä¸­æœ‰ 400 å¤šè¬ç­†ï¼Œä½”å…¨éƒ¨çš„ä¸€åŠ â†’ åŸºæ•¸å¾ˆå° â†’ å–®ç¨æ‹¿ä¾†å»ºç´¢å¼•å¯èƒ½æ²’å•¥ç”¨&lt;/li>
&lt;li>&lt;code>path&lt;/code> æ˜¯æ‹¿ä¾†æœç´¢è·¯å¾‘çš„ï¼Œé€šå¸¸éƒ½æ˜¯æ‰¾è©²è·¯å¾‘ä¹‹ä¸‹çš„å…¨éƒ¨ â†’ ç”¨äº† &lt;code>LIKE&lt;/code>ï¼Œä½†æ˜¯ &lt;code>%&lt;/code> åœ¨å³é‚Š â†’ Prefix match æ˜¯å¯ä»¥ç”¨åˆ°ç´¢å¼•çš„&lt;/li>
&lt;li>&lt;code>path&lt;/code> çš„åŸºæ•¸å¾ˆå¤§ â†’ å»º index æ•ˆæœä¸éŒ¯&lt;/li>
&lt;li>&lt;code>key_len&lt;/code> é¡¯ç¤ºä¸æ˜¯åªæœ‰ç”¨åˆ°è¯åˆç´¢å¼•ä¸­çš„ç¬¬ä¸€å€‹ (&lt;code>fid&lt;/code>)&lt;/li>
&lt;li>&lt;code>rows&lt;/code> æ˜¯ &lt;code>1&lt;/code> è¡¨ç¤ºåªéœ€è¦æƒä¸€è¡Œå°±å¯ä»¥äº† (è¶Šå°è¶Šå¥½)&lt;/li>
&lt;li>&lt;code>Extra&lt;/code> æœ‰ &lt;code>Using index&lt;/code> è¡¨ç¤ºåœ¨ç´¢å¼•æ¨¹ä¸­å°±å¯ä»¥æ‰¾åˆ°è³‡è¨Šï¼Œè¡¨ç¤ºé‚„ä¸éŒ¯&lt;/li>
&lt;/ol>
&lt;p>æœ‰æ©Ÿæœƒå¯ä»¥å†åšå¹¾å€‹å˜—è©¦ï¼š&lt;/p>
&lt;ol>
&lt;li>åªå»º &lt;code>path&lt;/code> å¯ä¸å¯ä»¥ â†’ åŸºæ•¸ç®—å¤§ï¼Œæ‰€ä»¥æƒ³å˜—è©¦&lt;/li>
&lt;li>åéä¾†å»ºæˆ &lt;code>path&lt;/code> + &lt;code>fid&lt;/code> æœƒä¸æœƒæ›´å¥½ â†’ åŸºæ•¸å¤§çš„æ”¾å‰é¢ï¼Œæƒ³è©¦è©¦çœ‹&lt;/li>
&lt;/ol>
&lt;h2 id="åƒè€ƒè³‡æ–™">åƒè€ƒè³‡æ–™&lt;/h2>
&lt;p>&lt;a href="https://www.jianshu.com/p/57a42f6a8746">MySQL æ‰§è¡Œè®¡åˆ’ explain plan&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://ithelp.ithome.com.tw/articles/10221971">30-13 ä¹‹è³‡æ–™åº«å±¤çš„å„ªåŒ– - ç´¢å¼•è¨­è¨ˆèˆ‡é›·å€&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://www.percona.com/blog/2020/04/23/a-simple-approach-to-troubleshooting-high-cpu-in-mysql/">A Simple Approach to Troubleshooting High CPU in MySQL - Percona Database Performance Blog&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://segmentfault.com/a/1190000008131735">MySQL æ€§èƒ½ä¼˜åŒ–ç¥å™¨ Explain ä½¿ç”¨åˆ†æ&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://opensource.actionsky.com/20210407-mysql/">ç¬¬25æœŸï¼šç´¢å¼•è®¾è®¡ï¼ˆç´¢å¼•çš„åŸºæ•°ä¸å¯é€‰æ‹©æ€§ï¼‰ - çˆ±å¯ç”Ÿå¼€æºç¤¾åŒº&lt;/a>&lt;/p>
- https://krapshsa.github.io/posts/mariadb-cpu-loading/ - Â© 2007 - 2022 krapshsa</description></item><item><title>Windows ä¸Šçš„é¡ Unix ç’°å¢ƒ - Cygwinã€MinGWã€MSYS</title><link>https://krapshsa.github.io/posts/windows-unix-cygwin-mingw-msys/</link><pubDate>Sun, 31 Jul 2022 14:58:00 +0000</pubDate><guid>https://krapshsa.github.io/posts/windows-unix-cygwin-mingw-msys/</guid><description>KRAPSHSA'S BLOG https://krapshsa.github.io/posts/windows-unix-cygwin-mingw-msys/ -&lt;h1 id="windows-ä¸Šçš„é¡-unix-ç’°å¢ƒ---cygwinmingwmsys">Windows ä¸Šçš„é¡ Unix ç’°å¢ƒ - Cygwinã€MinGWã€MSYS&lt;/h1>
&lt;hr>
&lt;h2 id="èµ·å› ">èµ·å› &lt;/h2>
&lt;p>è£äº† CLionï¼Œæƒ³åœ¨ Windows åº•ä¸‹ç‚ºäº†åœ¨ Windows ä¸Šä½¿ç”¨ &lt;code>gcc&lt;/code> ï¼Œæ²’æœ‰æƒ³åˆ°ç«Ÿç„¶å¦‚æ­¤å›°é›£ã€‚&lt;/p>
&lt;p>JetBrains IDE æœƒè‡ªå‹•åµæ¸¬æœ‰æ²’æœ‰ Git ï¼Œåœ¨ Windows ä¸Šå¦‚æœæ²’æœ‰å…ˆè£å¥½çš„è©±ï¼Œä»–å°±æœƒå®‰è£ Git for Windowsã€‚&lt;/p>
&lt;p>Git for Windows è‡ªå¸¶äº†ä¸€å€‹å¾ˆåƒ Linux çš„ç’°å¢ƒï¼Œä½†æ˜¯å»å¾ˆé›£ç”¨å®ƒé–‹å§‹é€²è¡Œ C çš„é–‹ç™¼ã€‚&lt;/p>
&lt;h2 id="å¤æ—©å‘³åšæ³•">å¤æ—©å‘³åšæ³•&lt;/h2>
&lt;p>&lt;a href="https://zh.wikipedia.org/zh-tw/Dev-C%2B%2B">Dev-C++ - ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://www.codeblocks.org/">Code::Blocks&lt;/a>&lt;/p>
&lt;p>Code::Blocks è·Ÿ Dev-C++ æ˜¯ Windows ä¸Šçš„ C/C++ IDEï¼Œ&lt;/p>
&lt;p>å‰›å…¥é–€çš„æ™‚å€™éƒ½æ˜¯ç”¨é€™å…©å¥—ï¼Œè£å¥½å°±æœƒé †ä¾¿å¹«ä½ è£ &lt;code>MinGW&lt;/code>ã€‚&lt;/p>
&lt;p>åæ­£æœƒå‹•ï¼Œå¯ä»¥äº¤ä½œæ¥­å°±å¥½ï¼Œæ‰€ä»¥ç•¶æ™‚ä¹Ÿæ²’æœ‰å¾ˆåœ¨æ„åˆ°åº•ä¸åŒçš„æ–¹æ¡ˆå·®åœ¨å“ªè£¡ï¼ŒåªçŸ¥é“å¯èƒ½æœ‰äº›æ±è¥¿æœƒç·¨ä¸éã€‚&lt;/p>
&lt;p>&lt;a href="https://stackoverflow.com/questions/33675953/best-way-to-get-around-fork-with-mingw-64">Best way to get around fork() with MingW 64?&lt;/a>&lt;/p>
&lt;p>å¾ Wiki ä¸Šæˆ‘å€‘å¯ä»¥å¤§æ¦‚çŸ¥é“é€™æ˜¯ä»€éº¼æ±è¥¿ï¼š&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>MinGW&lt;/strong>ï¼ˆ&lt;strong>Min&lt;/strong>imalist &lt;strong>G&lt;/strong>NU for &lt;strong>W&lt;/strong>indowsï¼‰ï¼Œåˆç¨±&lt;strong>mingw32&lt;/strong>ï¼Œæ˜¯å°‡ &lt;a href="https://zh.wikipedia.org/wiki/GCC">GCC&lt;/a> ç·¨è­¯å™¨å’Œ &lt;a href="https://zh.wikipedia.org/zh-tw/GNU_Binutils">GNU Binutils&lt;/a> ç§»æ¤åˆ°Win32å¹³å°ä¸‹çš„ç”¢ç‰©ï¼ŒåŒ…æ‹¬ä¸€ç³»åˆ—æ¨™é ­æª”ï¼ˆ&lt;a href="https://zh.wikipedia.org/wiki/Windows_API">Win32API&lt;/a>ï¼‰ã€&lt;a href="https://zh.wikipedia.org/wiki/%E9%9D%9C%E6%85%8B%E9%80%A3%E7%B5%90%E5%87%BD%E5%BC%8F%E5%BA%AB">å‡½å¼åº«&lt;/a>å’Œ&lt;a href="https://zh.wikipedia.org/wiki/%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6">å¯åŸ·è¡Œæª”&lt;/a>ã€‚&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>2005å¹´, OneVision Softwareéµç…§&lt;a href="https://zh.wikipedia.org/wiki/%E5%87%80%E5%AE%A4%E8%AE%BE%E8%AE%A1">æ·¨å®¤è¨­è¨ˆ&lt;/a>åŸå‰‡ï¼Œé–‹å§‹é–‹ç™¼Mingw-w64ï¼Œå› ç‚ºæœ€åˆçš„MinGWé …ç›®æ›´æ–°å¤ªæ…¢ï¼Œé²é²ä¸æ”¯æŒ64ä½ç’°å¢ƒé–‹ç™¼&lt;/p>
&lt;/blockquote>
&lt;p>å…¶ä»–ç§‘ç³»çš„ç¨‹å¼è¨­è¨ˆèª²ç”¨çš„éƒ½æ˜¯ Visual Studioï¼Œç”¨çš„ç·¨è­¯å™¨æ˜¯ Visual C++ï¼Œæˆ‘æ²’ç”¨éä¸æ¸…æ¥šï¼Œ&lt;/p>
&lt;p>ä¸éæ¦‚å¿µæ‡‰è©²æ˜¯ç›¸åŒçš„ï¼Œæœ‰äº›æ±è¥¿ Windows API ä¸æ”¯æ´å°±ä¸èƒ½ç”¨ï¼Œä¾‹å¦‚ &lt;code>fork()&lt;/code> ã€‚&lt;/p>
&lt;h2 id="è£-git-on-windows-è·‘å‡ºä¾†çš„-mingw">è£ git on windows è·‘å‡ºä¾†çš„ MinGW&lt;/h2>
&lt;p>&lt;img src="gw1-fef1084f-cd1b-44fc-aae8-ffbf6efd0094.png" alt="">&lt;/p>
&lt;p>ç¾åœ¨è£å®Œ git for windows 2.x ä¹‹å¾Œï¼Œå°±æœƒæœ‰ä¸€å€‹ git bash å¯ä»¥ç”¨ï¼Œä¸Šé¢å¯«è‘— &lt;code>MINGW64&lt;/code>&lt;/p>
&lt;p>é€™å°±æ˜¯ä¸€é–‹å§‹æåˆ°çš„ï¼Œè£ code::block æˆ– dev-c++ å¯ä»¥é †ä¾¿è£çš„ç·¨è­¯ç’°å¢ƒã€‚&lt;/p>
&lt;p>æ—¢ç„¶è£ git å°±æœ‰ï¼Œå°±æƒ³è¦æ‹¿ä¾†è©¦è‘—é–‹ç™¼çœ‹çœ‹ã€‚&lt;/p>
&lt;p>ä½†é€²åˆ° bash è£¡é¢å»ç™¼ç¾æ²’æœ‰ make å¯ä»¥ç”¨ï¼Œæ–¼æ˜¯å°±æƒ³è¦æ¨¡ä»¿ Linux åœ¨ä¸Šé¢ç”¨å¥—ä»¶ç®¡ç†å™¨è£ä¸€äº›å¥—ä»¶ã€‚&lt;/p>
&lt;p>ä½†æ˜¯åœ¨æ‰¾è³‡æ–™çš„éç¨‹ä¸­ç™¼ç¾ï¼Œå¾ˆå¤šäººéƒ½èªªï¼Œgit for windows æ˜¯æ­å»ºåœ¨ MSYS / MSYS2 ä¸Šé¢ï¼Œé‚£ MSYS åˆæ˜¯ä»€éº¼ï¼Ÿ&lt;/p>
&lt;h2 id="msys2">MSYS2&lt;/h2>
&lt;p>&lt;a href="https://www.msys2.org/wiki/MSYS2-introduction/">MSYS2 - MSYS2-Introduction&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://www.msys2.org/wiki/How-does-MSYS2-differ-from-Cygwin/">MSYS2 - How does MSYS2 differ from Cygwin?&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>MSYS2 is software distribution and a building platform for Windows.&lt;br>
It provides a Unix-like environment, a command-line interface and a software repository making it easier to install, use, build and port software on Windows.&lt;br>
That means Bash, Autotools, Make, Git, GCC, GDB&amp;hellip;, all easily installable through Pacman, a fully-featured package manager.&lt;br>
It is an independent rewrite of MSys, based on modern Cygwin (POSIX compatibility layer) and MinGW-w64 with the aim of better interoperability with native Windows software.&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>MSYS2 consists of three subsystems and their corresponding package repositories, &lt;code>msys2&lt;/code>, &lt;code>mingw32&lt;/code>, and &lt;code>mingw64&lt;/code>.&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>The &lt;code>mingw&lt;/code> subsystems provide native Windows programs and are the main focus of the project.&lt;br>
These programs are built to co-operate well with other Windows programs, independently of the other subsystems.&lt;br>
This part builds on the MinGW-w64 project.&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>The &lt;code>msys2&lt;/code> subsystem provides an emulated mostly-POSIX-compliant environment for building software, package management, and shell scripting.&lt;br>
These programs live in a virtual single-root filesystem (the root is the MSYS2 installation directory).&lt;br>
Some effort is made to have the programs work well with native Windows programs, but it&amp;rsquo;s not seamless. This part builds on the Cygwin project.&lt;/p>
&lt;/blockquote>
&lt;p>é€™é‚Šå¯« MSYS2 æœ‰å…©å¤§é¡çš„å­ç³»çµ±ï¼š&lt;/p>
&lt;ul>
&lt;li>MinGW - ç§»æ¤çš„ GCC ç·¨è­¯å™¨èˆ‡å·¥å…·éˆï¼Œå±¬æ–¼ Windows åŸç”Ÿã€‚&lt;/li>
&lt;li>MSYS2 - åŸºæ–¼ Cygwin æ”¹å¯«ï¼Œå±¬æ–¼æ¨¡æ“¬ POSIX&lt;/li>
&lt;/ul>
&lt;p>MSYS2 å¯ä»¥ç”¨ &lt;code>pacman&lt;/code> ä½œç‚ºå¥—ä»¶ç®¡ç†å·¥å…·ï¼Œä½†æ˜¯ Git for Windows ä¸Šæ²’æœ‰ã€‚å¦‚æœè£ Git for Windows SDK çš„è©±å°±æœƒæœ‰ï¼Œä½†æ˜¯å¾ˆè‚¥ã€‚&lt;/p>
&lt;p>æœ‰å˜—è©¦è‘—ä¸‹è¼‰å®‰è£åŒ…ç›´æ¥è£åœ¨ç³»çµ±ä¸Šï¼Œä¸éå¡äº†ä¸€å€‹ zstd å¾ˆéº»ç…©ï¼Œä½†é‚£å°±æ˜¯å¦å¤–ä¸€å€‹æ•…äº‹äº†ã€‚&lt;/p>
&lt;p>æœ€å¾Œæˆ‘è‡ªå·±è£äº† MSYS2 ï¼Œè·Ÿ Git åˆ†é–‹ä¾†ï¼Œå°±å¯ä»¥é †åˆ©çš„ç·¨è­¯äº†ã€‚&lt;/p>
&lt;p>ä¸éå¥½åƒé‚„æœ‰å¦å¤–ä¸€å€‹é¸æ“‡ï¼Œä»¥å‰åœ¨å­¸æ ¡æœ‰çœ‹è€å¸«ç”¨éï¼Œå°±æ˜¯å‰›å‰›æåˆ°çš„ Cygwinã€‚&lt;/p>
&lt;h2 id="æ›´åƒ-unix-çš„ç’°å¢ƒ---cygwin">æ›´åƒ Unix çš„ç’°å¢ƒ - Cygwin&lt;/h2>
&lt;p>&lt;img src="512px-Cygwin_logo-8cee2851-62bc-4926-a7ac-9b61b81091dc.svg.png" alt="">&lt;/p>
&lt;h3 id="what-is-it">What is it?&lt;/h3>
&lt;p>æ‘˜è‡ªå®˜ç¶²&lt;/p>
&lt;blockquote>
&lt;p>Cygwin is:&lt;/p>
&lt;ul>
&lt;li>a large collection of GNU and Open Source tools which provide functionality similar to a &lt;a href="https://en.wikipedia.org/wiki/Linux_distribution">Linux distribution&lt;/a> on Windows.&lt;/li>
&lt;li>a DLL (cygwin1.dll) which provides substantial POSIX API functionality.&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;ul>
&lt;li>ä¸€å€‹ GNU å’Œé–‹æºå·¥å…·çš„å¤§é›†åˆï¼Œåœ¨ Windows ä¸Šæä¾›é¡ä¼¼ Linux ç™¼è¡Œç‰ˆçš„åŠŸèƒ½&lt;/li>
&lt;li>&lt;code>cygwin1.dll&lt;/code> æä¾›å¤§é‡ POSIX API çš„åŠŸèƒ½&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>Cygwin is not:&lt;/p>
&lt;ul>
&lt;li>a way to run native Linux apps on Windows. You must rebuild your application &lt;em>from source&lt;/em> if you want it to run on Windows.&lt;/li>
&lt;li>a way to magically make native Windows apps aware of UNIXÂ® functionality like signals, ptys, etc. Again, you need to build your apps &lt;em>from source&lt;/em> if you want to take advantage of Cygwin functionality.&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;ul>
&lt;li>ä¸æ˜¯åœ¨ Windows ä¸Šè·‘ Linux åŸç”Ÿç¨‹å¼çš„æ–¹æ³•ã€‚è¦å¯ä»¥è·‘ï¼Œè¦å¾åŸå§‹ç¢¼é‡æ–° Buildã€‚&lt;/li>
&lt;li>ä¸€ç¨®è®“ Windows ç¨‹å¼å¯ä»¥ç¥å¥‡åœ°ä½¿ç”¨ Unix åŠŸèƒ½çš„æ–¹æ³•ï¼Œä½†æ˜¯è¦å¾åŸå§‹ç¢¼é‡æ–° Buildã€‚&lt;/li>
&lt;/ul>
&lt;p>é‡é»å°±æ˜¯ &lt;code>cygwin1.dll&lt;/code> ï¼Œæ¨¡æ“¬äº†å¾ˆå¤š Unix åŠŸèƒ½ï¼Œå…¶å¯¦ Build å‡ºä¾†çš„æ˜¯é€£çµäº†é€™å€‹ dll çš„ windows ç¨‹å¼ã€‚&lt;/p>
&lt;p>èˆ‡ MinGW èˆ‡ Cygwin çš„ç•°åŒï¼Œåœ¨ wiki ä¸Šå¯ä»¥æ‰¾å¾—åˆ°ï¼Œæ‘˜è‡ª Wikiï¼š&lt;/p>
&lt;blockquote>
&lt;p>Cygwin èˆ‡ MinGW çš†å¯ç”¨ä¾†ç§»æ¤ Unix è»Ÿé«”åˆ° Windowsï¼Œä½†å®ƒå€‘æ¡ç”¨æˆªç„¶ä¸åŒçš„å¯¦ä½œã€‚&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Cygwin æ—¨åœ¨æä¾›ä¸€å€‹å®Œæ•´çš„ &lt;a href="https://zh.wikipedia.org/wiki/POSIX">POSIX&lt;/a> å±¤ï¼ŒåŒ…æ‹¬ä¸»æµ Unix çš„ç³»çµ±å‘¼å«åŠå‡½å¼åº«å¯¦ä½œï¼›å…¶é‡è¦–ç›¸å®¹æ€§å„ªå…ˆæ–¼æ•ˆèƒ½ã€‚&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>ç›¸å°çš„ï¼ŒMinGW å‰‡è‘—é‡ç°¡åŒ–èˆ‡æ•ˆèƒ½ã€‚å› æ­¤ï¼Œå®ƒä¸¦ä¸æä¾›æŸäº›é›£ä»¥ç”¨ Windows API å¯¦ä½œçš„ POSIX APIï¼Œä¾‹å¦‚ &lt;code>fork()&lt;/code>ï¼Œ&lt;code>mmap()&lt;/code> å’Œ &lt;code>ioctl()&lt;/code>ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>æ“šèªªæœ‰ä¸€äº›æ•ˆèƒ½å•é¡Œï¼Œè€Œä¸”ä¹Ÿä¸ç¢ºå®šæ˜¯ä¸æ˜¯ 100% æ¨¡æ“¬ã€‚ä½†æ˜¯æ‹¿ä¾†é€šéå¤§ä¸€çš„ç¨‹å¼è¨­è¨ˆèª²æ˜¯ç¶½ç¶½æœ‰é¤˜çš„ã€‚&lt;/p>
&lt;p>åˆ°ä¹‹å¾Œçš„é«˜ç­‰ç¨‹å¼è¨­è¨ˆï¼Œå¤§å®¶å°±ç›´æ¥åœ¨ Unix ç’°å¢ƒåº•ä¸‹ä½œæ¥­äº†ã€‚&lt;/p>
&lt;p>&lt;img src="81Ywze2ijaL-a9de5dc3-85a0-4348-99b0-6e26fe4b45e3.jpg" alt="">&lt;/p>
&lt;h2 id="é—œä¿‚åœ–">é—œä¿‚åœ–&lt;/h2>
&lt;p>Stack Overflow ä¸Šå¤§ç¥æ•´ç†å¥½çš„é—œä¿‚åœ–ï¼Œæˆ‘è¦ºå¾—å¾ˆæ¸…æ¥š&lt;/p>
&lt;p>&lt;img src="apNVx-5bde4d7b-cfe8-403f-b9ba-f1a06680519a.png" alt="">&lt;/p>
&lt;p>å‡ºè™•ï¼š&lt;a href="https://stackoverflow.com/questions/25019057/how-are-msys-msys2-and-msysgit-related-to-each-other">https://stackoverflow.com/questions/25019057/how-are-msys-msys2-and-msysgit-related-to-each-other&lt;/a>&lt;/p>
&lt;h2 id="ä¹Ÿè¨±æ˜¯æ›´å¥½çš„æ–¹æ¡ˆwsl2">ä¹Ÿè¨±æ˜¯æ›´å¥½çš„æ–¹æ¡ˆï¼šWSL2&lt;/h2>
&lt;p>&lt;a href="https://www.v2ex.com/t/793055">æŸäº›åœºæ™¯ä¸‹ wsl2 çš„æ–‡ä»¶ç³»ç»Ÿç®€ç›´è›‹ç–¼çš„ä¸è¡Œ - V2EX&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://docs.microsoft.com/zh-tw/windows/wsl/tutorials/gui-apps">ä½¿ç”¨ WSL åŸ·è¡Œ Linux GUI æ‡‰ç”¨ç¨‹å¼&lt;/a>&lt;/p>
&lt;p>æ—¢ç„¶åœ¨ Windows ä¸Šé–‹ç™¼ Unix ç¨‹å¼ï¼Œç’°å¢ƒé€™éº¼ä¸å¥½æå®šï¼Œé‚£å°±ä¹¾è„† toolchain æ”¾åœ¨ VM ä¹‹é¡çš„ç’°å¢ƒè£¡é¢ã€‚&lt;/p>
&lt;p>æœå°‹äº†ä¸€ä¸‹æœ‰æ»¿å¤šäººåœ¨æŠ±æ€¨å¦‚æœè¦æŠŠç·¨è­¯ç’°å¢ƒæ”¾åœ¨ WSL è£¡é¢ï¼Œä½†æ˜¯ç”¨ Windows ä¸Šçš„ç·¨è¼¯å™¨ / IDE é–‹ç™¼å¾ˆä¸é †æ‰‹ (è·¯å¾‘è½‰æ›ã€æ•ˆèƒ½å•é¡Œ â€¦)ã€‚&lt;/p>
&lt;blockquote>
&lt;p>ä¸åœ¨ wsl2 é‡Œå®‰è£… ide çš„è¯ï¼Œlz çš„é—®é¢˜æ°¸è¿œè§£å†³ä¸äº†&lt;br>
æœ¬èº«è·¨è™šæ‹Ÿæœºå®¿ä¸»æœºä¹‹é—´çš„æ–‡ä»¶äº¤äº’æ€§èƒ½å°±å¾ˆå·®ï¼Œä½ ä¸€å®šè¦åœ¨ Windows ä¸‹è¯» WSL2 çš„æ–‡ä»¶æˆ– WSL2 è¯» Windows éƒ½ä¸ä¼šæœ‰å¥½ä½“éªŒçš„&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>lz ä½ ä¸æƒ³åœ¨ wsl2 é‡Œè£… ide ç»“æœå°±æ˜¯åå€’è¿™æ˜¯æœ€éº»çƒ¦çš„è§£å†³åŠæ³•ã€‚è€Œä¸”åœ¨ wsl2 é‡Œè£… IDE çš„è¯ï¼Œä½ å°†èƒ½è§£é”ä¸€é”®å®Œæ•´è¿ç§»ç”µè„‘ä¸Šçš„å¿«å‘ç¯å¢ƒåˆ°åˆ«çš„ç”µè„‘çš„éšè—ä¼˜ç‚¹ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>æ‰€å¹¸ JetBrains IDE æ˜¯å¯ä»¥è£åœ¨ Linux ä¸Šçš„ï¼Œå¯ä»¥åˆ©ç”¨ WSL è·‘ Linux GUIï¼Œæˆ–è€…æ˜¯è·‘ JetBrains Gateway æ‡‰è©²éƒ½æœƒå‹•ã€‚&lt;/p>
&lt;p>æ­£ç¢ºçš„å§¿å‹¢æ‡‰è©²æ˜¯é€£ IDE éƒ½è£åœ¨ WSL è£¡é¢ï¼Œå°±å¯ä»¥è§£æ±ºå¾ˆå¤š Windows è·Ÿ WSL æºé€šå¾—å›°é›£ã€‚&lt;/p>
&lt;p>å¦‚æœ Server ä¸å¤ å¼·ï¼Œæˆ–æ˜¯æ€•æ¡Œæ©Ÿå¤ªé–’äº†å¯ä»¥è©¦è©¦çœ‹é€™å€‹æ–¹æ³•ï¼Œæ‡‰è©²å¯ä»¥è§£æ±ºæ‰å¾ˆå¤šå•é¡Œ (ä¾‹å¦‚ï¼šä¸èƒ½ç”¨ rsync ï¼Œæ¬Šé™ä¸ä¸€æ¨£ï¼Œæ›è¡Œç¬¦è™Ÿä¸ä¸€æ¨£ â€¦)&lt;/p>
&lt;h2 id="ç•ªå¤–åœ¨-git-bash-ä¸Šè£é¡å¤–çš„æ±è¥¿æ˜¯å¾ˆéº»ç…©çš„">ç•ªå¤–ï¼šåœ¨ Git Bash ä¸Šè£é¡å¤–çš„æ±è¥¿æ˜¯å¾ˆéº»ç…©çš„&lt;/h2>
&lt;p>ä»¥ &lt;code>rsync&lt;/code> ç‚ºä¾‹ï¼Œæƒ³è¦åœ¨ Git Bash ä¸Šä½¿ç”¨ &lt;code>rsync&lt;/code> ï¼Œå¯ä»¥ç›´æ¥æŠŠ binary è·Ÿ dll ä¸Ÿé€²å»å°±å¥½äº†&lt;/p>
&lt;p>&lt;a href="https://packages.msys2.org/package/rsync?repo=msys&amp;amp;variant=x86_64">Package: rsync - MSYS2 Packages&lt;/a>&lt;/p>
&lt;p>ä½†æ˜¯ä»–çš„å‰¯æª”åæ˜¯ &lt;code>.tar.zst&lt;/code>ï¼Œé€™æ˜¯ facebook é–‹ç™¼çš„ä¸€ç¨®å£“ç¸®æ ¼å¼ï¼Œç›®å‰ windows å®˜æ–¹çš„è§£å£“ç¸®è·Ÿå®˜æ–¹ç‰ˆæœ¬çš„ 7z éƒ½é‚„ä¸æ”¯æ´ã€‚&lt;/p>
&lt;p>æˆ‘å€‘å¯ä»¥å» github ä¸‹è¼‰ windows ç‰ˆçš„ &lt;code>zstd.exe&lt;/code> å°±å¯ä»¥åœ¨ zstd çš„ç›®éŒ„ä¸­ï¼Œå¾ cmd è§£é–‹å¾—åˆ° tar æª”ï¼š&lt;/p>
&lt;pre>&lt;code>.\zstd.exe -d rsync-3.2.3-2-x86_64.pkg.tar.zst
&lt;/code>&lt;/pre>
&lt;p>&lt;a href="https://github.com/facebook/zstd/releases">Releases Â· facebook/zstd&lt;/a>&lt;/p>
&lt;p>æŠŠè§£å‡ºä¾†çš„å…§å®¹ä¸Ÿåˆ° git çš„ç›®éŒ„ä¸‹ï¼Œä¾‹å¦‚æˆ‘çš„æ˜¯ï¼š &lt;code>C:\Program Files\Git&lt;/code>&lt;/p>
&lt;p>ä½†æ˜¯é€™æ¨£é‚„æ˜¯è·‘ä¸èµ·ä¾†ï¼ŒåŸå› å°±æ˜¯å®ƒé‚„æœ‰ç¼ºç›¸ä¾çš„ dllï¼Œæ‰€ä»¥ä¸‹è¼‰å…©å€‹ç›¸ä¾çš„ dll å¦‚æ³•ç‚®è£½ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>libzstd&lt;/p>
&lt;p>&lt;a href="https://packages.msys2.org/package/libzstd?repo=msys&amp;amp;variant=x86_64">Package: libzstd - MSYS2 Packages&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>libxxhash&lt;/p>
&lt;p>&lt;a href="https://packages.msys2.org/package/libxxhash?repo=msys&amp;amp;variant=x86_64">Package: libxxhash - MSYS2 Packages&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="åƒè€ƒè³‡æ–™">åƒè€ƒè³‡æ–™&lt;/h2>
&lt;p>&lt;a href="https://stackoverflow.com/questions/25019057/how-are-msys-msys2-and-msysgit-related-to-each-other">How are msys, msys2, and msysgit related to each other?&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://zhuanlan.zhihu.com/p/360773277">Cygwin vs MinGW vs MSYS2&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://stackoverflow.com/questions/43146372/how-why-cygwin-breaks-windows-permissions">How/why cygwin breaks windows permissions?&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://blog.csdn.net/u012408797/article/details/120490201">POSIXã€Cygwinã€MSYSã€MSYS2ã€MinGWã€MinGW-w64çš„åŒºåˆ«_deparksçš„åšå®¢-CSDNåšå®¢_msys msys2&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://blog.zengrong.net/post/cygwin_and_mingw/">Cygwin ä¸ MinGW/MSYS/MSYS2ï¼Œå¦‚ä½•é€‰æ‹©ï¼Ÿ&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://www.msys2.org/wiki/How-does-MSYS2-differ-from-Cygwin/">MSYS2 - How does MSYS2 differ from Cygwin?&lt;/a>&lt;/p>
- https://krapshsa.github.io/posts/windows-unix-cygwin-mingw-msys/ - Â© 2007 - 2022 krapshsa</description></item><item><title>ä½¿ç”¨ container åœ¨åŒä¸€å€‹ stack éƒ¨å±¬ log driver æ™‚ï¼Œdocker stack rm ç¶“å¸¸æ€§å¤±æ•—</title><link>https://krapshsa.github.io/posts/container-stack-log-driver-docker-stack-rm/</link><pubDate>Thu, 28 Jul 2022 08:19:00 +0000</pubDate><guid>https://krapshsa.github.io/posts/container-stack-log-driver-docker-stack-rm/</guid><description>KRAPSHSA'S BLOG https://krapshsa.github.io/posts/container-stack-log-driver-docker-stack-rm/ -&lt;h1 id="ä½¿ç”¨-container-åœ¨åŒä¸€å€‹-stack-éƒ¨å±¬-log-driver-æ™‚docker-stack-rm-ç¶“å¸¸æ€§å¤±æ•—">ä½¿ç”¨ container åœ¨åŒä¸€å€‹ stack éƒ¨å±¬ log driver æ™‚ï¼Œdocker stack rm ç¶“å¸¸æ€§å¤±æ•—&lt;/h1>
&lt;h2 id="èµ·å› ">èµ·å› &lt;/h2>
&lt;p>æœ€è¿‘æŠŠ &lt;code>fluentd&lt;/code> åŠ å…¥åˆ° docker swarm ä¸­ç•¶ä½œ Log Driver çš„æ™‚å€™ï¼Œ&lt;/p>
&lt;p>ç§»é™¤ docker stack æ™‚ï¼Œé—œé–‰å¾—æ¯”è¼ƒæ…¢çš„ service æœ‰æ©Ÿæœƒæ²’è¾¦æ³•å®Œæ•´ç§»é™¤ã€‚&lt;/p>
&lt;p>æ­¤æ™‚ &lt;code>docker inspect&lt;/code> ï¼Œ &lt;code>docker rm&lt;/code> ç­‰æŒ‡ä»¤éƒ½æœƒå¡ä½ã€‚&lt;/p>
&lt;p>å”¯ä¸€çš„è§£æ³•å°±æ˜¯é‡å•Ÿ docker daemonã€‚&lt;/p>
&lt;p>çŒœæ¸¬å› ç‚ºæ²’è¾¦æ³•ä¿è­‰ &lt;code>fluentd&lt;/code> åœ¨æœ€å¾Œä¸€å€‹é—œé–‰å°è‡´å‡ºéŒ¯äº†ã€‚&lt;/p>
&lt;h2 id="é‡è£½æ­¥é©Ÿ">é‡è£½æ­¥é©Ÿ&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>ç§»é™¤ docker stack&lt;/p>
&lt;pre>&lt;code> docker stack rm mystack
&lt;/code>&lt;/pre>
&lt;/li>
&lt;li>
&lt;p>æª¢æŸ¥ service éƒ½ç§»é™¤æ‰äº†&lt;/p>
&lt;pre>&lt;code> docker service ls
&lt;/code>&lt;/pre>
&lt;p>ID NAME MODE REPLICAS IMAGE PORTS&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç™¼ç¾é‚„æœ‰ container æ²’æœ‰æ­£å¸¸é—œé–‰ï¼Œä¸”æ°¸é å¡åœ¨é€™å€‹ç‹€æ…‹&lt;/p>
&lt;pre>&lt;code> docker stack ps mystack --no-trunc
&lt;/code>&lt;/pre>
&lt;p>ID NAME IMAGE NODE DESIRED STATE CURRENT STATE ERROR PORTS&lt;br>
5fllkwthpur60gzgeqq4cow48 i1i65yn2b35jqsfqk7gb9y7l8.1 my-clamav:2022-0406-145048 localhost.localdomain Remove Running about a minute ago&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>æª¢æŸ¥ç³»çµ±çš„ Logï¼Œæœ‰å‡ºç¾å¦‚ä¸‹è¨Šæ¯ (æˆ‘æ˜¯ CentOS)ï¼š&lt;/p>
&lt;pre>&lt;code>sudo cat /var/log/messages | grep 3c902d2962f7
Jul 28 10:48:49 localhost dockerd[1265564]: time=&amp;quot;2022-07-28T10:48:49.917640954+08:00&amp;quot; level=info msg=&amp;quot;Configured log driver does not support reads, enabling local file cache for container logs&amp;quot; container=3c902d2962f7fb6af8ce5a16a965bd2707383dbb18fed9b6942e1687f6419c4b driver=fluentd
Jul 28 10:48:49 localhost containerd[1161]: time=&amp;quot;2022-07-28T10:48:49.936470840+08:00&amp;quot; level=info msg=&amp;quot;starting signal loop&amp;quot; namespace=moby path=/run/containerd/io.containerd.runtime.v2.task/moby/3c902d2962f7fb6af8ce5a16a965bd2707383dbb18fed9b6942e1687f6419c4b pid=1269465 runtime=io.containerd.runc.v2
Jul 28 10:53:00 localhost dockerd[1265564]: time=&amp;quot;2022-07-28T10:53:00.719182463+08:00&amp;quot; level=info msg=&amp;quot;ignoring event&amp;quot; container=3c902d2962f7fb6af8ce5a16a965bd2707383dbb18fed9b6942e1687f6419c4b module=libcontainerd namespace=moby topic=/tasks/delete type=&amp;quot;*events.TaskDelete&amp;quot;
Jul 28 10:53:00 localhost containerd[1161]: time=&amp;quot;2022-07-28T10:53:00.719579189+08:00&amp;quot; level=info msg=&amp;quot;shim disconnected&amp;quot; id=3c902d2962f7fb6af8ce5a16a965bd2707383dbb18fed9b6942e1687f6419c4b
Jul 28 10:53:00 localhost containerd[1161]: time=&amp;quot;2022-07-28T10:53:00.719667935+08:00&amp;quot; level=warning msg=&amp;quot;cleaning up after shim disconnected&amp;quot; id=3c902d2962f7fb6af8ce5a16a965bd2707383dbb18fed9b6942e1687f6419c4b namespace=moby
Jul 28 10:53:07 localhost dockerd[1265564]: time=&amp;quot;2022-07-28T10:53:07.730207608+08:00&amp;quot; level=info msg=&amp;quot;Container failed to exit within 10s of signal 15 - using the force&amp;quot; container=3c902d2962f7fb6af8ce5a16a965bd2707383dbb18fed9b6942e1687f6419c4b
Jul 28 10:57:07 localhost dockerd[1271313]: time=&amp;quot;2022-07-28T10:57:07.971173522+08:00&amp;quot; level=info msg=&amp;quot;Removing stale sandbox c540d42e6cba844695f8cb780f5c28a82a59500207ace2b6526d11eca5b54600 (3c902d2962f7fb6af8ce5a16a965bd2707383dbb18fed9b6942e1687f6419c4b)&amp;quot;
Jul 28 11:12:19 localhost dockerd[1271313]: time=&amp;quot;2022-07-28T11:12:19.902248293+08:00&amp;quot; level=error msg=&amp;quot;Error getting service 3c902d2962f7: service 3c902d2962f7 not found&amp;quot;
Jul 28 11:12:19 localhost dockerd[1271313]: time=&amp;quot;2022-07-28T11:12:19.905022331+08:00&amp;quot; level=error msg=&amp;quot;Error getting task 3c902d2962f7: task 3c902d2962f7 not found&amp;quot;
Jul 28 11:12:19 localhost dockerd[1271313]: time=&amp;quot;2022-07-28T11:12:19.906474336+08:00&amp;quot; level=error msg=&amp;quot;Error getting node 3c902d2962f7: node 3c902d2962f7 not found&amp;quot;
&lt;/code>&lt;/pre>
&lt;h2 id="çŒœæ¸¬">çŒœæ¸¬&lt;/h2>
&lt;p>ä¸€é–‹å§‹æ‡·ç–‘æ˜¯æ²’æœ‰è¾¦æ³•é—œæ‰ processï¼Œå¯èƒ½åœ¨å¡åœ¨å¯« Log äº†ã€‚&lt;br>
ç…§è‘—é€™å€‹æ€è·¯ï¼Œå…ˆå»æŸ¥è©¢æŸ¥è©¢ container ç›¸å°æ‡‰çš„ pidï¼š&lt;/p>
&lt;pre>&lt;code>docker inspect -f '{{.State.Pid}}' 3c902d2962f7
1269485
sudo pstree -a -p
...
|-containerd-shim,1269465 -namespace moby -id 3c902d2962f7fb6af8ce5a16a965bd2707383dbb18fed9b6942e1687f6419c4b -address/run/
| |-docker-init,1269485 -- /bootstrap.sh
| | |-clamd,1269536 -c /etc/clamav/clam.conf
| | | `-{clamd},1269731
| | |-freshclam,1269560 -d -c 6
| | | `-{freshclam},1269732
| | `-gunicorn,1269558 /usr/bin/gunicorn --workers=2 --threads=2 --bind 0.0.0.0:8000 --daemon wsgi:app
| | |-gunicorn,1269561 /usr/bin/gunicorn --workers=2 --threads=2 --bind 0.0.0.0:8000 --daemon wsgi:app
| | `-gunicorn,1269562 /usr/bin/gunicorn --workers=2 --threads=2 --bind 0.0.0.0:8000 --daemon wsgi:app
...
&lt;/code>&lt;/pre>
&lt;p>æ¥è‘—ç§»é™¤æ‰æ•´å€‹ stackã€‚&lt;/p>
&lt;p>ä½†æ˜¯ç™¼ç¾å„˜ç®¡ &lt;code>docker ps&lt;/code> çœ‹åˆ° container é‚„åœ¨ï¼Œä½† pid å·²ç¶“æ‰¾ä¸åˆ°äº†ã€‚&lt;/p>
&lt;h2 id="workaround">Workaround&lt;/h2>
&lt;p>çœ‹èµ·ä¾†é€™å€‹ container æ²’æœ‰æ–½åŠ›é»ï¼Œåªå¥½è©¦è©¦çœ‹æ‰‹å‹•èª¿æ•´é—œé–‰ Service çš„é †åº&lt;/p>
&lt;p>æœ€å¾Œå¯«æˆè…³æœ¬ï¼š&lt;/p>
&lt;pre>&lt;code>function get_services() {
services=$(docker service ls --format &amp;quot;{{.Name}}&amp;quot; | sed -E 's/mystack_//')
echo &amp;quot;$services&amp;quot;
}
function down() {
stack_prefix=&amp;quot;mystack_&amp;quot;
last_service=&amp;quot;fluentd&amp;quot;
services=$(get_services)
services=${services[*]/$last_service}
for service in $services
do
docker service rm &amp;quot;$stack_prefix$service&amp;quot; &amp;gt; /dev/null
done
# wait for all containers removed.
for i in {1..60}
do
docker ps -a | grep -v &amp;quot;$stack_prefix$last_service&amp;quot; | grep -q &amp;quot;$stack_prefix&amp;quot;
if [ $? -eq 1 ]; then
docker service rm &amp;quot;$stack_prefix$last_service&amp;quot; &amp;gt; /dev/null
break
fi
sleep 1
done
if [[ &amp;quot;60&amp;quot; -eq &amp;quot;$i&amp;quot; ]]; then
exit 1
fi
for i in {1..60}
do
docker ps -a | grep -q &amp;quot;$stack_prefix&amp;quot;
if [ $? -eq 1 ]; then
break
fi
sleep 1
done
if [[ &amp;quot;60&amp;quot; -eq &amp;quot;$i&amp;quot; ]]; then
exit 1
fi
}
down&lt;/code>&lt;/pre>
- https://krapshsa.github.io/posts/container-stack-log-driver-docker-stack-rm/ - Â© 2007 - 2022 krapshsa</description></item><item><title>OwnCloud MariaDB mysqldump å¤±æ•—</title><link>https://krapshsa.github.io/posts/owncloud-mariadb-mysqldump/</link><pubDate>Wed, 27 Jul 2022 06:58:00 +0000</pubDate><guid>https://krapshsa.github.io/posts/owncloud-mariadb-mysqldump/</guid><description>KRAPSHSA'S BLOG https://krapshsa.github.io/posts/owncloud-mariadb-mysqldump/ -&lt;h1 id="owncloud-mariadb-mysqldump-å¤±æ•—">OwnCloud MariaDB mysqldump å¤±æ•—&lt;/h1>
&lt;h2 id="èµ·å› ">èµ·å› &lt;/h2>
&lt;p>è¿‘æœŸé­é‡ &lt;code>mysqldump&lt;/code> å‚™ä»½ OwnCloud çš„ DB çµæœ crash çš„å•é¡Œ&lt;/p>
&lt;p>google äº†ä¸€ä¸‹ç™¼ç¾ NextCloud ä¹Ÿæœ‰äººç™¼ç”Ÿé¡ä¼¼çš„å•é¡Œ&lt;/p>
&lt;p>&lt;a href="https://help.nextcloud.com/t/table-oc-filecache-extended-corrupt/123149">Table &lt;code>oc_filecache_extended&lt;/code> corrupt?&lt;/a>&lt;/p>
&lt;p>æ‘˜éŒ„é€£çµå…§çš„éŒ¯èª¤è¨Šæ¯ï¼š&lt;/p>
&lt;pre>&lt;code>Thread pointer: 0x8548068d8
Attempting backtrace. You can use the following information to find out
where mysqld died. If you see no messages after this, something went
terribly wrong...
stack_bottom = 0x7fffdf76cf38 thread_stack 0x3c000
0x12fcbfc &amp;lt;my_print_stacktrace+0x3c&amp;gt; at /usr/local/libexec/mariadbd
0xc6330f &amp;lt;handle_fatal_signal+0x28f&amp;gt; at /usr/local/libexec/mariadbd
0x8018f7de0 &amp;lt;pthread_sigmask+0x530&amp;gt; at /lib/libthr.so.3
Trying to get some variables.
Some pointers may be invalid and cause the dump to abort.
Query (0x85484dab0): show fields from `oc_cards`
Connection ID (thread ID): 4
Status: NOT_KILLED
&lt;/code>&lt;/pre>
&lt;p>æœ‰å•é¡Œçš„èªå¥å°±æ˜¯é€™æ¢ï¼š&lt;/p>
&lt;pre>&lt;code>show fields from &amp;lt;TABLE&amp;gt;
&lt;/code>&lt;/pre>
&lt;p>åŸ·è¡Œæª¢æŸ¥ï¼Œä½†æ˜¯çµæœä¹Ÿå…¨éƒ¨éƒ½æ˜¯ OK&lt;/p>
&lt;pre>&lt;code>mysqlcheck --all-databases
&lt;/code>&lt;/pre>
&lt;h2 id="workaround">Workaround&lt;/h2>
&lt;p>ç”±æ–¼é€™å°æ©Ÿå™¨é‚„æœ‰äººåœ¨ç”¨ï¼Œè¦æƒ³è¾¦æ³•è¶•å¿«è®“æœå‹™æ­£å¸¸ã€‚&lt;/p>
&lt;p>ç¶“éå¤šæ–¹å˜—è©¦ï¼Œç›®å‰æœ‰æ•ˆçš„åšæ³•å¦‚ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>é–‹å•Ÿä¸€å°ç›¸åŒè¨­å®šçš„æ–° DBï¼Œç‚ºäº†è®“ä»–ç”¢ç”Ÿå¥½ DB åŸºæœ¬è³‡æ–™&lt;/p>
&lt;pre>&lt;code> docker run -v ${PWD}/data:/bitnami/mariadb/data -p 3306:3306 -e MARIADB_ROOT_PASSWORD=mypassword -d bitnami/mariadb:10.5.15
&lt;/code>&lt;/pre>
&lt;/li>
&lt;li>
&lt;p>é—œé–‰æ–° DB&lt;/p>
&lt;pre>&lt;code> docker stop &amp;lt;db çš„ id&amp;gt;
&lt;/code>&lt;/pre>
&lt;/li>
&lt;li>
&lt;p>è¤‡è£½ DB è³‡æ–™å¤¾ä¸‹ï¼Œ &lt;code>ibdata1&lt;/code> èˆ‡ &lt;code>owncloud&lt;/code> çš„è³‡æ–™å¤¾åˆ°æ–° DB è³‡æ–™å¤¾ä¸‹&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å†æ¬¡å•Ÿå‹•æ–° DB&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>ä¹‹å¾Œä¹Ÿè©¦è‘—å»æ‰¾å‡ºåŸå› ï¼Œä½†æ˜¯é€£ core file éƒ½æ²’è¾¦æ³•ç”¢ç”Ÿæ‰€ä»¥æ²’è¾¦æ³• GDBã€‚&lt;/p>
&lt;h2 id="åƒè€ƒè³‡æ–™">åƒè€ƒè³‡æ–™&lt;/h2>
&lt;p>&lt;a href="https://blog.csdn.net/hawht/article/details/84246261">MariaDB Errorï¼š1932 Table doesn&amp;rsquo;t exist in engine çš„è§£å†³æ–¹æ³•_u014461454çš„åšå®¢-CSDNåšå®¢&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://blog.path8.net/archives/7608.html">MySQL/MariaDBå·²è¢«é”è¡¨è¿è¡Œä¸­çƒ­å¤åˆ¶ä¸ºå‰¯æœ¬/innodbè¡¨é”™è¯¯Table xx doesn&amp;rsquo;t exist in engineå¤„ç†&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://dba.stackexchange.com/questions/62989/how-does-innodb-store-tables-in-ibdata-file">How does InnoDB store tables in ibdata file?&lt;/a>&lt;/p>
- https://krapshsa.github.io/posts/owncloud-mariadb-mysqldump/ - Â© 2007 - 2022 krapshsa</description></item></channel></rss>